{"version":3,"file":"linkstate.modern.js","sources":["../node_modules/dlv/dist/dlv.umd.js","../src/index.js"],"sourcesContent":["!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}:\"function\"==typeof define&&define.amd?define(function(){return function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}}):t.dlv=function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}}(this);\n//# sourceMappingURL=dlv.umd.js.map\n","import delve from 'dlv';\n\n/** @typedef {import('preact').AnyComponent} Component */\n\n/** Create an Event handler function that sets a given state property.\n *\t@param {Component} component\tThe component whose state should be updated\n *\t@param {string} key\t\t\t\tA dot-notated key path to update in the component's state\n *\t@param {string} eventPath\t\tA dot-notated key path to the value that should be retrieved from the Event or component\n *\t@returns {function} linkedStateHandler\n */\nexport default function linkState(component, key, eventPath) {\n\tlet path = key.split('.'),\n\t\tcache = component.__lsc || (component.__lsc = {});\n\n\treturn cache[key+eventPath] || (cache[key+eventPath] = function(e) {\n\t\tlet t = e && e.target || this,\n\t\t\tstate = {},\n\t\t\tobj = state,\n\t\t\tv = typeof eventPath==='string' ? delve(e, eventPath) : (t && t.nodeName) ? (t.type.match(/^che|rad/) ? t.checked : t.value) : e,\n\t\t\ti = 0;\n\t\tfor ( ; i<path.length-1; i++) {\n\t\t\tobj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n\t\t}\n\t\tobj[path[i]] = v;\n\t\tcomponent.setState(state);\n\t});\n}\n"],"names":["module","t","n","e","i","o","split","length","component","key","eventPath","path","cache","__lsc","target","this","state","obj","v","delve","nodeName","type","match","checked","value","setState"],"mappings":"uBAAoEA,UAAe,SAASC,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAIH,EAAEA,EAAEI,MAAMJ,EAAEI,MAAM,KAAKJ,EAAEE,EAAE,EAAEA,EAAEF,EAAEK,OAAOH,IAAIH,EAAEA,EAAEA,EAAEC,EAAEE,IAAIC,EAAE,OAAOJ,IAAII,EAAEF,EAAEF,0MCUlJO,EAAWC,EAAKC,GACjD,IAAIC,EAAOF,EAAIH,MAAM,KACpBM,EAAQJ,EAAUK,QAAUL,EAAUK,MAAQ,IAE/C,OAAOD,EAAMH,EAAIC,KAAeE,EAAMH,EAAIC,GAAa,SAASP,GAC/D,IAAIF,EAAIE,GAAKA,EAAEW,QAAUC,KACxBC,EAAQ,GACRC,EAAMD,EACNE,EAAuB,iBAAZR,EAAuBS,EAAMhB,EAAGO,GAAcT,GAAKA,EAAEmB,SAAanB,EAAEoB,KAAKC,MAAM,YAAcrB,EAAEsB,QAAUtB,EAAEuB,MAASrB,EAC/HC,EAAI,EACL,KAAQA,EAAEO,EAAKJ,OAAO,EAAGH,IACxBa,EAAMA,EAAIN,EAAKP,MAAQa,EAAIN,EAAKP,KAAOA,GAAKI,EAAUQ,MAAML,EAAKP,KAAO,IAEzEa,EAAIN,EAAKP,IAAMc,EACfV,EAAUiB,SAAST"}