{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport { h, Component, Fragment } from 'preact';\nimport { createPortal } from 'preact/compat';\nimport { FlagUserModal } from '../../packs/flagUserModal';\nimport { formatDate } from './util';\n\nvar SingleArticle = /*#__PURE__*/function (_Component) {\n  _inherits(SingleArticle, _Component);\n\n  var _super = _createSuper(SingleArticle);\n\n  function SingleArticle() {\n    var _this;\n\n    _classCallCheck(this, SingleArticle);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"activateToggle\", function (e) {\n      e.preventDefault();\n      var _this$props = _this.props,\n          id = _this$props.id,\n          path = _this$props.path,\n          toggleArticle = _this$props.toggleArticle;\n      toggleArticle(id, path);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tagsFormat\", function (tag, key) {\n      if (tag) {\n        return h(\"span\", {\n          className: \"crayons-tag\",\n          key: key\n        }, h(\"span\", {\n          className: \"crayons-tag__prefix\"\n        }, \"#\"), tag);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(SingleArticle, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          id = _this$props2.id,\n          title = _this$props2.title,\n          publishedAt = _this$props2.publishedAt,\n          cachedTagList = _this$props2.cachedTagList,\n          user = _this$props2.user,\n          key = _this$props2.key,\n          articleOpened = _this$props2.articleOpened,\n          path = _this$props2.path;\n      var tags = cachedTagList.split(', ').map(function (tag) {\n        _this2.tagsFormat(tag, key);\n      });\n      var newAuthorNotification = user.articles_count <= 3 ? 'ðŸ‘‹ ' : '';\n      var modContainer = id ? document.getElementById(\"mod-iframe-\".concat(id)) : document.getElementById('mod-container');\n      return h(Fragment, null, modContainer && createPortal(h(FlagUserModal, {\n        moderationUrl: path,\n        authorId: user.id\n      }), document.getElementsByClassName('flag-user-modal-container')[0]), h(\"button\", {\n        \"data-testid\": \"mod-article-\".concat(id),\n        type: \"button\",\n        className: \"moderation-single-article\",\n        onClick: this.activateToggle\n      }, h(\"span\", {\n        className: \"article-title\"\n      }, h(\"header\", null, h(\"h3\", {\n        className: \"fs-base fw-bold lh-tight\"\n      }, h(\"a\", {\n        className: \"article-title-link\",\n        href: path\n      }, title))), tags), h(\"span\", {\n        className: \"article-author\"\n      }, newAuthorNotification, user.name), h(\"span\", {\n        className: \"article-published-at\"\n      }, h(\"time\", {\n        dateTime: publishedAt\n      }, formatDate(publishedAt))), h(\"div\", {\n        className: \"article-iframes-container \".concat(articleOpened ? 'opened' : ''),\n        id: \"article-iframe-\".concat(id)\n      })));\n    }\n  }]);\n\n  return SingleArticle;\n}(Component);\n\nexport { SingleArticle as default };\nSingleArticle.propTypes = {\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  publishedAt: PropTypes.string.isRequired,\n  cachedTagList: PropTypes.isRequired,\n  user: PropTypes.isRequired,\n  key: PropTypes.number.isRequired\n};","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/modCenter/singleArticle/index.jsx"],"names":["PropTypes","h","Component","Fragment","createPortal","FlagUserModal","formatDate","SingleArticle","e","preventDefault","props","id","path","toggleArticle","tag","key","title","publishedAt","cachedTagList","user","articleOpened","tags","split","map","tagsFormat","newAuthorNotification","articles_count","modContainer","document","getElementById","getElementsByClassName","activateToggle","name","propTypes","number","isRequired","string"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport { h, Component, Fragment } from 'preact';\nimport { createPortal } from 'preact/compat';\nimport { FlagUserModal } from '../../packs/flagUserModal';\nimport { formatDate } from './util';\n\nexport default class SingleArticle extends Component {\n  activateToggle = (e) => {\n    e.preventDefault();\n    const { id, path, toggleArticle } = this.props;\n\n    toggleArticle(id, path);\n  };\n\n  tagsFormat = (tag, key) => {\n    if (tag) {\n      return (\n        <span className=\"crayons-tag\" key={key}>\n          <span className=\"crayons-tag__prefix\">#</span>\n          {tag}\n        </span>\n      );\n    }\n  };\n\n  render() {\n    const {\n      id,\n      title,\n      publishedAt,\n      cachedTagList,\n      user,\n      key,\n      articleOpened,\n      path,\n    } = this.props;\n    const tags = cachedTagList.split(', ').map((tag) => {\n      this.tagsFormat(tag, key);\n    });\n\n    const newAuthorNotification = user.articles_count <= 3 ? 'ðŸ‘‹ ' : '';\n    const modContainer = id\n      ? document.getElementById(`mod-iframe-${id}`)\n      : document.getElementById('mod-container');\n\n    return (\n      <Fragment>\n        {modContainer &&\n          createPortal(\n            <FlagUserModal moderationUrl={path} authorId={user.id} />,\n            document.getElementsByClassName('flag-user-modal-container')[0],\n          )}\n        <button\n          data-testid={`mod-article-${id}`}\n          type=\"button\"\n          className=\"moderation-single-article\"\n          onClick={this.activateToggle}\n        >\n          <span className=\"article-title\">\n            <header>\n              <h3 className=\"fs-base fw-bold lh-tight\">\n                <a className=\"article-title-link\" href={path}>\n                  {title}\n                </a>\n              </h3>\n            </header>\n            {tags}\n          </span>\n          <span className=\"article-author\">\n            {newAuthorNotification}\n            {user.name}\n          </span>\n          <span className=\"article-published-at\">\n            <time dateTime={publishedAt}>{formatDate(publishedAt)}</time>\n          </span>\n          <div\n            className={`article-iframes-container ${\n              articleOpened ? 'opened' : ''\n            }`}\n            id={`article-iframe-${id}`}\n          />\n        </button>\n      </Fragment>\n    );\n  }\n}\n\nSingleArticle.propTypes = {\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  publishedAt: PropTypes.string.isRequired,\n  cachedTagList: PropTypes.isRequired,\n  user: PropTypes.isRequired,\n  key: PropTypes.number.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}