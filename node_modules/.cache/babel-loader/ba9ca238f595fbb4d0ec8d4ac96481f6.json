{"ast":null,"code":"/* eslint-disable no-alert */\nexport default function initHiddenComments() {\n  function hide(commentId) {\n    var confirmMsg = \"\\nAre you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.\\n\\nAll child comments in this thread will also be hidden.\\n\\nFor further actions, you may consider blocking this person and/or reporting abuse.\\n    \";\n    var confirmHide = window.confirm(confirmMsg);\n\n    if (confirmHide) {\n      fetch(\"/comments/\".concat(commentId, \"/hide\"), {\n        method: 'PATCH',\n        headers: {\n          'X-CSRF-Token': window.csrfToken\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        if (response.hidden === 'true') {\n          /* eslint-disable-next-line no-restricted-globals */\n          location.reload();\n        }\n      });\n    }\n  }\n\n  function unhide(commentId) {\n    fetch(\"/comments/\".concat(commentId, \"/unhide\"), {\n      method: 'PATCH',\n      headers: {\n        'X-CSRF-Token': window.csrfToken\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      if (response.hidden === 'false') {\n        /* eslint-disable-next-line no-restricted-globals */\n        location.reload();\n      }\n    });\n  }\n\n  var hideLinks = Array.from(document.getElementsByClassName('hide-comment'));\n  hideLinks.forEach(function (link) {\n    var _link$dataset = link.dataset,\n        hideType = _link$dataset.hideType,\n        commentId = _link$dataset.commentId;\n\n    if (hideType === 'hide') {\n      link.addEventListener('click', function () {\n        hide(commentId);\n      });\n    } else if (hideType === 'unhide') {\n      link.addEventListener('click', function () {\n        unhide(commentId);\n      });\n    }\n  });\n}\n/* eslint-enable no-alert */","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/contentDisplayPolicy/initHiddenComments.js"],"names":["initHiddenComments","hide","commentId","confirmMsg","confirmHide","window","confirm","fetch","method","headers","csrfToken","then","response","json","hidden","location","reload","unhide","hideLinks","Array","from","document","getElementsByClassName","forEach","link","dataset","hideType","addEventListener"],"mappings":"AAAA;AACA,eAAe,SAASA,kBAAT,GAA8B;AAC3C,WAASC,IAAT,CAAcC,SAAd,EAAyB;AACvB,QAAMC,UAAU,mSAAhB;AAOA,QAAMC,WAAW,GAAGC,MAAM,CAACC,OAAP,CAAeH,UAAf,CAApB;;AACA,QAAIC,WAAJ,EAAiB;AACfG,MAAAA,KAAK,qBAAcL,SAAd,YAAgC;AACnCM,QAAAA,MAAM,EAAE,OAD2B;AAEnCC,QAAAA,OAAO,EAAE;AACP,0BAAgBJ,MAAM,CAACK;AADhB;AAF0B,OAAhC,CAAL,CAMGC,IANH,CAMQ,UAACC,QAAD;AAAA,eAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,OANR,EAOGF,IAPH,CAOQ,UAACC,QAAD,EAAc;AAClB,YAAIA,QAAQ,CAACE,MAAT,KAAoB,MAAxB,EAAgC;AAC9B;AACAC,UAAAA,QAAQ,CAACC,MAAT;AACD;AACF,OAZH;AAaD;AACF;;AAED,WAASC,MAAT,CAAgBf,SAAhB,EAA2B;AACzBK,IAAAA,KAAK,qBAAcL,SAAd,cAAkC;AACrCM,MAAAA,MAAM,EAAE,OAD6B;AAErCC,MAAAA,OAAO,EAAE;AACP,wBAAgBJ,MAAM,CAACK;AADhB;AAF4B,KAAlC,CAAL,CAMGC,IANH,CAMQ,UAACC,QAAD;AAAA,aAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,KANR,EAOGF,IAPH,CAOQ,UAACC,QAAD,EAAc;AAClB,UAAIA,QAAQ,CAACE,MAAT,KAAoB,OAAxB,EAAiC;AAC/B;AACAC,QAAAA,QAAQ,CAACC,MAAT;AACD;AACF,KAZH;AAaD;;AAED,MAAME,SAAS,GAAGC,KAAK,CAACC,IAAN,CAAWC,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,CAAX,CAAlB;AAEAJ,EAAAA,SAAS,CAACK,OAAV,CAAkB,UAACC,IAAD,EAAU;AAAA,wBACMA,IAAI,CAACC,OADX;AAAA,QAClBC,QADkB,iBAClBA,QADkB;AAAA,QACRxB,SADQ,iBACRA,SADQ;;AAG1B,QAAIwB,QAAQ,KAAK,MAAjB,EAAyB;AACvBF,MAAAA,IAAI,CAACG,gBAAL,CAAsB,OAAtB,EAA+B,YAAM;AACnC1B,QAAAA,IAAI,CAACC,SAAD,CAAJ;AACD,OAFD;AAGD,KAJD,MAIO,IAAIwB,QAAQ,KAAK,QAAjB,EAA2B;AAChCF,MAAAA,IAAI,CAACG,gBAAL,CAAsB,OAAtB,EAA+B,YAAM;AACnCV,QAAAA,MAAM,CAACf,SAAD,CAAN;AACD,OAFD;AAGD;AACF,GAZD;AAaD;AACD","sourcesContent":["/* eslint-disable no-alert */\nexport default function initHiddenComments() {\n  function hide(commentId) {\n    const confirmMsg = `\nAre you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.\n\nAll child comments in this thread will also be hidden.\n\nFor further actions, you may consider blocking this person and/or reporting abuse.\n    `;\n    const confirmHide = window.confirm(confirmMsg);\n    if (confirmHide) {\n      fetch(`/comments/${commentId}/hide`, {\n        method: 'PATCH',\n        headers: {\n          'X-CSRF-Token': window.csrfToken,\n        },\n      })\n        .then((response) => response.json())\n        .then((response) => {\n          if (response.hidden === 'true') {\n            /* eslint-disable-next-line no-restricted-globals */\n            location.reload();\n          }\n        });\n    }\n  }\n\n  function unhide(commentId) {\n    fetch(`/comments/${commentId}/unhide`, {\n      method: 'PATCH',\n      headers: {\n        'X-CSRF-Token': window.csrfToken,\n      },\n    })\n      .then((response) => response.json())\n      .then((response) => {\n        if (response.hidden === 'false') {\n          /* eslint-disable-next-line no-restricted-globals */\n          location.reload();\n        }\n      });\n  }\n\n  const hideLinks = Array.from(document.getElementsByClassName('hide-comment'));\n\n  hideLinks.forEach((link) => {\n    const { hideType, commentId } = link.dataset;\n\n    if (hideType === 'hide') {\n      link.addEventListener('click', () => {\n        hide(commentId);\n      });\n    } else if (hideType === 'unhide') {\n      link.addEventListener('click', () => {\n        unhide(commentId);\n      });\n    }\n  });\n}\n/* eslint-enable no-alert */\n"]},"metadata":{},"sourceType":"module"}