{"ast":null,"code":"function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { updateExperienceLevel } from '../actionsPanel/actionsPanel';\n\nfunction applyReactedClass(category) {\n  var upVote = document.querySelector(\"[data-category='thumbsup']\");\n  var downVote = document.querySelector(\"[data-category='thumbsdown']\");\n  var vomitVote = document.querySelector(\"[data-category='vomit']\");\n\n  if (category === 'thumbsup') {\n    downVote.classList.remove('reacted');\n    vomitVote.classList.remove('reacted');\n  } else {\n    upVote.classList.remove('reacted');\n  }\n}\n\nfunction updateMainReactions(_x, _x2, _x3) {\n  return _updateMainReactions.apply(this, arguments);\n} // Experience-Level JS\n\n\nfunction _updateMainReactions() {\n  _updateMainReactions = _asyncToGenerator(function* (reactableType, category, reactableId) {\n    var clickedBtn = document.querySelector(\"[data-category=\\\"\".concat(category, \"\\\"]\"));\n\n    try {\n      var response = yield fetch('/reactions', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'X-CSRF-Token': window.csrfToken,\n          'Content-Type': 'application/json'\n        },\n        credentials: 'same-origin',\n        body: JSON.stringify({\n          reactable_type: reactableType,\n          category: category,\n          reactable_id: reactableId\n        })\n      });\n      var outcome = yield response.json();\n\n      if (outcome.result === 'create') {\n        clickedBtn.classList.add('reacted');\n      } else if (outcome.result === 'destroy') {\n        clickedBtn.classList.remove('reacted');\n      } else {\n        // eslint-disable-next-line no-alert\n        alert(\"Error: \".concat(outcome.error)); // eslint-disable-next-line no-console\n\n        console.error(\"Error: \".concat(outcome.error));\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-alert\n      alert(\"Error: \".concat(error));\n    }\n  });\n  return _updateMainReactions.apply(this, arguments);\n}\n\nArray.from(document.getElementsByClassName('level-rating-button')).forEach(function (btn) {\n  btn.addEventListener('click', function () {\n    updateExperienceLevel(btn.dataset.userId, btn.dataset.articleId, btn.value, btn.dataset.group);\n  });\n});\ndocument.querySelectorAll('.reaction-button, .reaction-vomit-button').forEach(function (btn) {\n  btn.addEventListener('click', function () {\n    applyReactedClass(btn.dataset.category);\n    updateMainReactions(btn.dataset.reactableType, btn.dataset.category, btn.dataset.reactableId);\n  });\n});\nvar form = document.getElementsByClassName('button_to')[0];\nform.addEventListener('submit', function (e) {\n  e.preventDefault();\n\n  if (confirm('Are you SURE you want to delete this comment?')) {\n    form.submit();\n  }\n});","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/packs/commentModPage.js"],"names":["updateExperienceLevel","applyReactedClass","category","upVote","document","querySelector","downVote","vomitVote","classList","remove","updateMainReactions","reactableType","reactableId","clickedBtn","response","fetch","method","headers","Accept","window","csrfToken","credentials","body","JSON","stringify","reactable_type","reactable_id","outcome","json","result","add","alert","error","console","Array","from","getElementsByClassName","forEach","btn","addEventListener","dataset","userId","articleId","value","group","querySelectorAll","form","e","preventDefault","confirm","submit"],"mappings":"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","sourcesContent":["import { updateExperienceLevel } from '../actionsPanel/actionsPanel';\n\nfunction applyReactedClass(category) {\n  const upVote = document.querySelector(\"[data-category='thumbsup']\");\n  const downVote = document.querySelector(\"[data-category='thumbsdown']\");\n  const vomitVote = document.querySelector(\"[data-category='vomit']\");\n\n  if (category === 'thumbsup') {\n    downVote.classList.remove('reacted');\n    vomitVote.classList.remove('reacted');\n  } else {\n    upVote.classList.remove('reacted');\n  }\n}\n\nasync function updateMainReactions(reactableType, category, reactableId) {\n  const clickedBtn = document.querySelector(`[data-category=\"${category}\"]`);\n  try {\n    const response = await fetch('/reactions', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'X-CSRF-Token': window.csrfToken,\n        'Content-Type': 'application/json',\n      },\n      credentials: 'same-origin',\n      body: JSON.stringify({\n        reactable_type: reactableType,\n        category,\n        reactable_id: reactableId,\n      }),\n    });\n\n    const outcome = await response.json();\n\n    if (outcome.result === 'create') {\n      clickedBtn.classList.add('reacted');\n    } else if (outcome.result === 'destroy') {\n      clickedBtn.classList.remove('reacted');\n    } else {\n      // eslint-disable-next-line no-alert\n      alert(`Error: ${outcome.error}`);\n      // eslint-disable-next-line no-console\n      console.error(`Error: ${outcome.error}`);\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-alert\n    alert(`Error: ${error}`);\n  }\n}\n\n// Experience-Level JS\nArray.from(document.getElementsByClassName('level-rating-button')).forEach(\n  (btn) => {\n    btn.addEventListener('click', () => {\n      updateExperienceLevel(\n        btn.dataset.userId,\n        btn.dataset.articleId,\n        btn.value,\n        btn.dataset.group,\n      );\n    });\n  },\n);\n\ndocument\n  .querySelectorAll('.reaction-button, .reaction-vomit-button')\n  .forEach((btn) => {\n    btn.addEventListener('click', () => {\n      applyReactedClass(btn.dataset.category);\n      updateMainReactions(\n        btn.dataset.reactableType,\n        btn.dataset.category,\n        btn.dataset.reactableId,\n      );\n    });\n  });\n\nconst form = document.getElementsByClassName('button_to')[0];\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n  if (confirm('Are you SURE you want to delete this comment?')) {\n    form.submit();\n  }\n});\n"]},"metadata":{},"sourceType":"module"}