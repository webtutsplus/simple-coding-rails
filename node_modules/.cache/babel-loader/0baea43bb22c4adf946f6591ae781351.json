{"ast":null,"code":"// import Pusher from 'pusher-js';\nexport function setupPusher(key, callbackObjects) {\n  return import('pusher-js').then(function (_) {\n    var _window = window,\n        _window$pusher = _window.pusher,\n        pusher = _window$pusher === void 0 ? new Pusher(key, {\n      authEndpoint: '/pusher/auth',\n      auth: {\n        headers: {\n          'X-CSRF-Token': window.csrfToken\n        }\n      },\n      cluster: 'us2',\n      encrypted: true\n    }) : _window$pusher;\n    window.pusher = pusher;\n    var channel = pusher.subscribe(callbackObjects.channelId.toString());\n    channel.bind('message-created', callbackObjects.messageCreated);\n    channel.bind('message-deleted', callbackObjects.messageDeleted);\n    channel.bind('message-edited', callbackObjects.messageEdited);\n    channel.bind('mentioned', callbackObjects.mentioned);\n    channel.bind('message-opened', callbackObjects.messageOpened);\n    channel.bind('channel-cleared', callbackObjects.channelCleared);\n    channel.bind('user-banned', callbackObjects.redactUserMessages);\n    channel.bind('pusher:subscription_error', callbackObjects.channelError);\n    return channel;\n  });\n}","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/utilities/connect/pusher.js"],"names":["setupPusher","key","callbackObjects","then","_","window","pusher","Pusher","authEndpoint","auth","headers","csrfToken","cluster","encrypted","channel","subscribe","channelId","toString","bind","messageCreated","messageDeleted","messageEdited","mentioned","messageOpened","channelCleared","redactUserMessages","channelError"],"mappings":"AAAA;AAEA,OAAO,SAASA,WAAT,CAAqBC,GAArB,EAA0BC,eAA1B,EAA2C;AAChD,SAAO,OAAO,WAAP,EAAoBC,IAApB,CAAyB,UAACC,CAAD,EAAO;AAAA,kBAYjCC,MAZiC;AAAA,iCAEnCC,MAFmC;AAAA,QAEnCA,MAFmC,+BAE1B,IAAIC,MAAJ,CAAWN,GAAX,EAAgB;AACvBO,MAAAA,YAAY,EAAE,cADS;AAEvBC,MAAAA,IAAI,EAAE;AACJC,QAAAA,OAAO,EAAE;AACP,0BAAgBL,MAAM,CAACM;AADhB;AADL,OAFiB;AAOvBC,MAAAA,OAAO,EAAE,KAPc;AAQvBC,MAAAA,SAAS,EAAE;AARY,KAAhB,CAF0B;AAcrCR,IAAAA,MAAM,CAACC,MAAP,GAAgBA,MAAhB;AAEA,QAAMQ,OAAO,GAAGR,MAAM,CAACS,SAAP,CAAiBb,eAAe,CAACc,SAAhB,CAA0BC,QAA1B,EAAjB,CAAhB;AACAH,IAAAA,OAAO,CAACI,IAAR,CAAa,iBAAb,EAAgChB,eAAe,CAACiB,cAAhD;AACAL,IAAAA,OAAO,CAACI,IAAR,CAAa,iBAAb,EAAgChB,eAAe,CAACkB,cAAhD;AACAN,IAAAA,OAAO,CAACI,IAAR,CAAa,gBAAb,EAA+BhB,eAAe,CAACmB,aAA/C;AACAP,IAAAA,OAAO,CAACI,IAAR,CAAa,WAAb,EAA0BhB,eAAe,CAACoB,SAA1C;AACAR,IAAAA,OAAO,CAACI,IAAR,CAAa,gBAAb,EAA+BhB,eAAe,CAACqB,aAA/C;AACAT,IAAAA,OAAO,CAACI,IAAR,CAAa,iBAAb,EAAgChB,eAAe,CAACsB,cAAhD;AACAV,IAAAA,OAAO,CAACI,IAAR,CAAa,aAAb,EAA4BhB,eAAe,CAACuB,kBAA5C;AAEAX,IAAAA,OAAO,CAACI,IAAR,CAAa,2BAAb,EAA0ChB,eAAe,CAACwB,YAA1D;AAEA,WAAOZ,OAAP;AACD,GA5BM,CAAP;AA6BD","sourcesContent":["// import Pusher from 'pusher-js';\n\nexport function setupPusher(key, callbackObjects) {\n  return import('pusher-js').then((_) => {\n    const {\n      pusher = new Pusher(key, {\n        authEndpoint: '/pusher/auth',\n        auth: {\n          headers: {\n            'X-CSRF-Token': window.csrfToken,\n          },\n        },\n        cluster: 'us2',\n        encrypted: true,\n      }),\n    } = window;\n\n    window.pusher = pusher;\n\n    const channel = pusher.subscribe(callbackObjects.channelId.toString());\n    channel.bind('message-created', callbackObjects.messageCreated);\n    channel.bind('message-deleted', callbackObjects.messageDeleted);\n    channel.bind('message-edited', callbackObjects.messageEdited);\n    channel.bind('mentioned', callbackObjects.mentioned);\n    channel.bind('message-opened', callbackObjects.messageOpened);\n    channel.bind('channel-cleared', callbackObjects.channelCleared);\n    channel.bind('user-banned', callbackObjects.redactUserMessages);\n\n    channel.bind('pusher:subscription_error', callbackObjects.channelError);\n\n    return channel;\n  });\n}\n"]},"metadata":{},"sourceType":"module"}