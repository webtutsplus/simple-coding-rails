{"ast":null,"code":"import { h } from 'preact';\nimport PropTypes from 'prop-types'; // eslint-disable-next-line import/no-unresolved\n\nimport ThreeDotsIcon from 'images/overflow-horizontal.svg';\nimport { adjustTimestamp } from './util';\nimport ErrorMessage from './messages/errorMessage';\nimport { Button } from '@crayons';\n\nvar Message = function Message(_ref) {\n  var currentUserId = _ref.currentUserId,\n      id = _ref.id,\n      user = _ref.user,\n      userID = _ref.userID,\n      message = _ref.message,\n      color = _ref.color,\n      type = _ref.type,\n      editedAt = _ref.editedAt,\n      timestamp = _ref.timestamp,\n      profileImageUrl = _ref.profileImageUrl,\n      onContentTrigger = _ref.onContentTrigger,\n      onDeleteMessageTrigger = _ref.onDeleteMessageTrigger,\n      onReportMessageTrigger = _ref.onReportMessageTrigger,\n      onEditMessageTrigger = _ref.onEditMessageTrigger;\n  var spanStyle = {\n    color: color\n  };\n\n  if (type === 'error') {\n    return h(ErrorMessage, {\n      message: message\n    });\n  }\n\n  var MessageArea = function MessageArea() {\n    if (userID === currentUserId) {\n      message = message.replace(\"@\".concat(user), \"<mark>@\".concat(user, \"</mark>\"));\n    }\n\n    return h(\"span\", {\n      className: \"chatmessagebody__message\" // eslint-disable-next-line react/no-danger\n      ,\n      dangerouslySetInnerHTML: {\n        __html: message\n      }\n    });\n  };\n\n  var dropdown = h(\"div\", {\n    className: \"message__actions\"\n  }, h(\"span\", {\n    className: \"ellipsis__menubutton\"\n  }, h(\"img\", {\n    src: ThreeDotsIcon,\n    alt: \"dropdown menu icon\"\n  })), h(\"div\", {\n    className: \"messagebody__dropdownmenu\"\n  }, h(Button, {\n    variant: \"ghost\",\n    onClick: function onClick(_) {\n      return onEditMessageTrigger(id);\n    }\n  }, \"Edit\"), h(Button, {\n    variant: \"ghost-danger\",\n    onClick: function onClick(_) {\n      return onDeleteMessageTrigger(id);\n    }\n  }, \"Delete\")));\n  var dropdownReport = h(\"div\", {\n    className: \"message__actions\"\n  }, h(\"span\", {\n    className: \"ellipsis__menubutton\"\n  }, h(\"img\", {\n    src: ThreeDotsIcon,\n    alt: \"message actions\"\n  })), h(\"div\", {\n    className: \"messagebody__dropdownmenu report__abuse__button\"\n  }, h(Button, {\n    variant: \"ghost-danger\",\n    onClick: function onClick(_) {\n      return onReportMessageTrigger(id);\n    }\n  }, \"Report Abuse\")));\n  return h(\"div\", {\n    className: \"chatmessage\"\n  }, h(\"div\", {\n    className: \"chatmessage__profilepic\"\n  }, h(\"a\", {\n    href: \"/\".concat(user),\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    \"data-content\": \"sidecar-user\",\n    onClick: onContentTrigger,\n    \"aria-label\": \"View User Profile\"\n  }, h(\"img\", {\n    className: \"chatmessagebody__profileimage\",\n    src: profileImageUrl,\n    alt: \"\".concat(user, \" profile\"),\n    \"data-content\": \"sidecar-user\"\n  }))), h(\"div\", {\n    role: \"presentation\",\n    className: \"chatmessage__body\",\n    onClick: onContentTrigger\n  }, h(\"div\", {\n    className: \"message__info__actions\"\n  }, h(\"div\", {\n    className: \"message__info\"\n  }, h(\"span\", {\n    className: \"chatmessagebody__username not-dark-theme-text-compatible\",\n    style: spanStyle\n  }, h(\"a\", {\n    className: \"chatmessagebody__username--link\",\n    href: \"/\".concat(user),\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    \"data-content\": \"sidecar-user\",\n    onClick: onContentTrigger\n  }, user)), editedAt ? h(\"span\", {\n    className: \"chatmessage__timestamp edited_message\"\n  }, \"\".concat(adjustTimestamp(editedAt)), h(\"i\", null, \" (edited)\")) : ' ', timestamp && !editedAt ? h(\"span\", {\n    className: \"chatmessage__timestamp\"\n  }, \"\".concat(adjustTimestamp(timestamp))) : ' '), userID === currentUserId ? dropdown : dropdownReport), h(\"div\", {\n    className: \"chatmessage__bodytext\"\n  }, h(MessageArea, null))));\n};\n\nMessage.propTypes = {\n  currentUserId: PropTypes.number.isRequired,\n  id: PropTypes.number.isRequired,\n  user: PropTypes.string.isRequired,\n  userID: PropTypes.number.isRequired,\n  color: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  type: PropTypes.string,\n  timestamp: PropTypes.string,\n  editedAt: PropTypes.number.isRequired,\n  profileImageUrl: PropTypes.string,\n  onContentTrigger: PropTypes.func.isRequired,\n  onDeleteMessageTrigger: PropTypes.func.isRequired,\n  onEditMessageTrigger: PropTypes.func.isRequired,\n  onReportMessageTrigger: PropTypes.func.isRequired\n};\nMessage.defaultProps = {\n  type: 'normalMessage',\n  timestamp: null,\n  profileImageUrl: ''\n};\nexport default Message;","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/chat/message.jsx"],"names":["h","PropTypes","ThreeDotsIcon","adjustTimestamp","ErrorMessage","Button","Message","currentUserId","id","user","userID","message","color","type","editedAt","timestamp","profileImageUrl","onContentTrigger","onDeleteMessageTrigger","onReportMessageTrigger","onEditMessageTrigger","spanStyle","MessageArea","replace","__html","dropdown","_","dropdownReport","propTypes","number","isRequired","string","func","defaultProps"],"mappings":"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","sourcesContent":["import { h } from 'preact';\nimport PropTypes from 'prop-types';\n// eslint-disable-next-line import/no-unresolved\nimport ThreeDotsIcon from 'images/overflow-horizontal.svg';\nimport { adjustTimestamp } from './util';\nimport ErrorMessage from './messages/errorMessage';\nimport { Button } from '@crayons';\n\nconst Message = ({\n  currentUserId,\n  id,\n  user,\n  userID,\n  message,\n  color,\n  type,\n  editedAt,\n  timestamp,\n  profileImageUrl,\n  onContentTrigger,\n  onDeleteMessageTrigger,\n  onReportMessageTrigger,\n  onEditMessageTrigger,\n}) => {\n  const spanStyle = { color };\n\n  if (type === 'error') {\n    return <ErrorMessage message={message} />;\n  }\n\n  const MessageArea = () => {\n    if (userID === currentUserId) {\n      message = message.replace(`@${user}`, `<mark>@${user}</mark>`);\n    }\n\n    return (\n      <span\n        className=\"chatmessagebody__message\"\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{ __html: message }}\n      />\n    );\n  };\n\n  const dropdown = (\n    <div className=\"message__actions\">\n      <span className=\"ellipsis__menubutton\">\n        <img src={ThreeDotsIcon} alt=\"dropdown menu icon\" />\n      </span>\n\n      <div className=\"messagebody__dropdownmenu\">\n        <Button variant=\"ghost\" onClick={(_) => onEditMessageTrigger(id)}>\n          Edit\n        </Button>\n        <Button\n          variant=\"ghost-danger\"\n          onClick={(_) => onDeleteMessageTrigger(id)}\n        >\n          Delete\n        </Button>\n      </div>\n    </div>\n  );\n  const dropdownReport = (\n    <div className=\"message__actions\">\n      <span className=\"ellipsis__menubutton\">\n        <img src={ThreeDotsIcon} alt=\"message actions\" />\n      </span>\n\n      <div className=\"messagebody__dropdownmenu report__abuse__button\">\n        <Button\n          variant=\"ghost-danger\"\n          onClick={(_) => onReportMessageTrigger(id)}\n        >\n          Report Abuse\n        </Button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"chatmessage\">\n      <div className=\"chatmessage__profilepic\">\n        <a\n          href={`/${user}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          data-content=\"sidecar-user\"\n          onClick={onContentTrigger}\n          aria-label=\"View User Profile\"\n        >\n          <img\n            className=\"chatmessagebody__profileimage\"\n            src={profileImageUrl}\n            alt={`${user} profile`}\n            data-content=\"sidecar-user\"\n          />\n        </a>\n      </div>\n      <div\n        role=\"presentation\"\n        className=\"chatmessage__body\"\n        onClick={onContentTrigger}\n      >\n        <div className=\"message__info__actions\">\n          <div className=\"message__info\">\n            <span\n              className=\"chatmessagebody__username not-dark-theme-text-compatible\"\n              style={spanStyle}\n            >\n              <a\n                className=\"chatmessagebody__username--link\"\n                href={`/${user}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                data-content=\"sidecar-user\"\n                onClick={onContentTrigger}\n              >\n                {user}\n              </a>\n            </span>\n            {editedAt ? (\n              <span className=\"chatmessage__timestamp edited_message\">\n                {`${adjustTimestamp(editedAt)}`}\n                <i> (edited)</i>\n              </span>\n            ) : (\n              ' '\n            )}\n\n            {timestamp && !editedAt ? (\n              <span className=\"chatmessage__timestamp\">\n                {`${adjustTimestamp(timestamp)}`}\n              </span>\n            ) : (\n              ' '\n            )}\n          </div>\n          {userID === currentUserId ? dropdown : dropdownReport}\n        </div>\n        <div className=\"chatmessage__bodytext\">\n          <MessageArea />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMessage.propTypes = {\n  currentUserId: PropTypes.number.isRequired,\n  id: PropTypes.number.isRequired,\n  user: PropTypes.string.isRequired,\n  userID: PropTypes.number.isRequired,\n  color: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  type: PropTypes.string,\n  timestamp: PropTypes.string,\n  editedAt: PropTypes.number.isRequired,\n  profileImageUrl: PropTypes.string,\n  onContentTrigger: PropTypes.func.isRequired,\n  onDeleteMessageTrigger: PropTypes.func.isRequired,\n  onEditMessageTrigger: PropTypes.func.isRequired,\n  onReportMessageTrigger: PropTypes.func.isRequired,\n};\n\nMessage.defaultProps = {\n  type: 'normalMessage',\n  timestamp: null,\n  profileImageUrl: '',\n};\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}