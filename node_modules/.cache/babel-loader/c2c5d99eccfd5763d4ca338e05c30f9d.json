{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport { h, Component, createRef } from 'preact';\nimport listingPropTypes from './listingPropTypes';\nimport { Button } from '@crayons';\n\nvar Icon = function Icon() {\n  return h(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    className: \"crayons-icon\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, h(\"path\", {\n    \"fill-rule\": \"evenodd\",\n    \"clip-rule\": \"evenodd\",\n    d: \"M7 12a2 2 0 11-4 0 2 2 0 014 0zm7 0a2 2 0 11-4 0 2 2 0 014 0zm5 2a2 2 0 100-4 2 2 0 000 4z\"\n  }));\n};\n\nvar DropdownMenu = /*#__PURE__*/function (_Component) {\n  _inherits(DropdownMenu, _Component);\n\n  var _super = _createSuper(DropdownMenu);\n\n  function DropdownMenu(props) {\n    var _this;\n\n    _classCallCheck(this, DropdownMenu);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"componentRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleMenu\", function () {\n      var isOpen = _this.state.isOpen;\n\n      _this.setState({\n        isOpen: !isOpen\n      }, _this.addOrRemoveClickOutsideHandler);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addOrRemoveClickOutsideHandler\", function () {\n      var isOpen = _this.state.isOpen;\n      return isOpen ? document.addEventListener('mousedown', _this.handleClickOutside) : document.removeEventListener('mousedown', _this.handleClickOutside);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClickOutside\", function (e) {\n      if (_this.componentRef.current && !_this.componentRef.current.contains(e.target)) {\n        _this.toggleMenu();\n      }\n    });\n\n    _this.state = {\n      isOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(DropdownMenu, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          listing = _this$props.listing,\n          isOwner = _this$props.isOwner;\n      var isOpen = this.state.isOpen;\n      var id = listing.id,\n          category = listing.category,\n          slug = listing.slug;\n      var editUrl = \"/listings/\".concat(id, \"/edit\");\n      var reportUrl = \"/report-abuse?url=https://dev.to/listings/\".concat(category, \"/\").concat(slug);\n      return h(\"div\", {\n        className: \"single-listing__dropdown absolute right-0 top-0\",\n        ref: this.componentRef\n      }, h(Button, {\n        variant: \"ghost\",\n        contentType: \"icon\",\n        tagName: \"button\",\n        \"aria-label\": \"Toggle dropdown menu\",\n        icon: Icon,\n        onClick: this.toggleMenu\n      }), h(\"div\", {\n        className: \"crayons-dropdown absolute right-0 top-100 p-1 \".concat(isOpen ? 'block' : '')\n      }, isOwner ? h(\"a\", {\n        href: editUrl,\n        className: \"crayons-link crayons-link--block\"\n      }, \"Edit\") : h(\"a\", {\n        href: reportUrl,\n        className: \"crayons-link crayons-link--block\"\n      }, \"Report Abuse\")));\n    }\n  }]);\n\n  return DropdownMenu;\n}(Component);\n\n_defineProperty(DropdownMenu, \"propTypes\", {\n  isOwner: PropTypes.bool.isRequired,\n  listing: listingPropTypes.isRequired\n});\n\nexport default DropdownMenu;","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/listings/singleListing/DropdownMenu.jsx"],"names":["PropTypes","h","Component","createRef","listingPropTypes","Button","Icon","DropdownMenu","props","isOpen","state","setState","addOrRemoveClickOutsideHandler","document","addEventListener","handleClickOutside","removeEventListener","e","componentRef","current","contains","target","toggleMenu","listing","isOwner","id","category","slug","editUrl","reportUrl","bool","isRequired"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport { h, Component, createRef } from 'preact';\nimport listingPropTypes from './listingPropTypes';\nimport { Button } from '@crayons';\n\nconst Icon = () => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    className=\"crayons-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M7 12a2 2 0 11-4 0 2 2 0 014 0zm7 0a2 2 0 11-4 0 2 2 0 014 0zm5 2a2 2 0 100-4 2 2 0 000 4z\"\n    />\n  </svg>\n);\n\nclass DropdownMenu extends Component {\n  componentRef = createRef();\n\n  static propTypes = {\n    isOwner: PropTypes.bool.isRequired,\n    listing: listingPropTypes.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n    };\n  }\n\n  toggleMenu = () => {\n    const { isOpen } = this.state;\n    this.setState({ isOpen: !isOpen }, this.addOrRemoveClickOutsideHandler);\n  };\n\n  addOrRemoveClickOutsideHandler = () => {\n    const { isOpen } = this.state;\n    return isOpen\n      ? document.addEventListener('mousedown', this.handleClickOutside)\n      : document.removeEventListener('mousedown', this.handleClickOutside);\n  };\n\n  handleClickOutside = (e) => {\n    if (\n      this.componentRef.current &&\n      !this.componentRef.current.contains(e.target)\n    ) {\n      this.toggleMenu();\n    }\n  };\n\n  render() {\n    const { listing, isOwner } = this.props;\n    const { isOpen } = this.state;\n    const { id, category, slug } = listing;\n    const editUrl = `/listings/${id}/edit`;\n    const reportUrl = `/report-abuse?url=https://dev.to/listings/${category}/${slug}`;\n\n    return (\n      <div\n        className=\"single-listing__dropdown absolute right-0 top-0\"\n        ref={this.componentRef}\n      >\n        <Button\n          variant=\"ghost\"\n          contentType=\"icon\"\n          tagName=\"button\"\n          aria-label=\"Toggle dropdown menu\"\n          icon={Icon}\n          onClick={this.toggleMenu}\n        />\n        <div\n          className={`crayons-dropdown absolute right-0 top-100 p-1 ${\n            isOpen ? 'block' : ''\n          }`}\n        >\n          {isOwner ? (\n            <a href={editUrl} className=\"crayons-link crayons-link--block\">\n              Edit\n            </a>\n          ) : (\n            <a href={reportUrl} className=\"crayons-link crayons-link--block\">\n              Report Abuse\n            </a>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DropdownMenu;\n"]},"metadata":{},"sourceType":"module"}