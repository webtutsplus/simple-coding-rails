{"ast":null,"code":"import { h, render } from 'preact';\nimport { getUserDataAndCsrfToken } from '../chat/util';\nimport ArticleForm from '../article-form/articleForm';\nimport { Snackbar } from '../Snackbar';\nHTMLDocument.prototype.ready = new Promise(function (resolve) {\n  if (document.readyState !== 'loading') {\n    return resolve();\n  }\n\n  document.addEventListener('DOMContentLoaded', function () {\n    return resolve();\n  });\n  return null;\n});\n\nfunction loadForm() {\n  // The Snackbar for the article page\n  var snackZone = document.getElementById('snack-zone');\n\n  if (snackZone) {\n    render(h(Snackbar, {\n      lifespan: \"3\"\n    }), snackZone);\n  }\n\n  getUserDataAndCsrfToken().then(function (_ref) {\n    var currentUser = _ref.currentUser,\n        csrfToken = _ref.csrfToken;\n    window.currentUser = currentUser;\n    window.csrfToken = csrfToken;\n    var root = document.getElementById('js-article-form');\n    var _root$dataset = root.dataset,\n        article = _root$dataset.article,\n        organizations = _root$dataset.organizations,\n        version = _root$dataset.version,\n        siteLogo = _root$dataset.siteLogo;\n    render(h(ArticleForm, {\n      article: article,\n      organizations: organizations,\n      version: version,\n      siteLogo: siteLogo\n    }), root, root.firstElementChild);\n  });\n}\n\ndocument.ready.then(function () {\n  loadForm();\n  window.InstantClick.on('change', function () {\n    if (document.getElementById('article-form')) {\n      loadForm();\n    }\n  });\n});","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/packs/articleForm.jsx"],"names":["h","render","getUserDataAndCsrfToken","ArticleForm","Snackbar","HTMLDocument","prototype","ready","Promise","resolve","document","readyState","addEventListener","loadForm","snackZone","getElementById","then","currentUser","csrfToken","window","root","dataset","article","organizations","version","siteLogo","firstElementChild","InstantClick","on"],"mappings":"AAAA,SAASA,CAAT,EAAYC,MAAZ,QAA0B,QAA1B;AACA,SAASC,uBAAT,QAAwC,cAAxC;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,SAASC,QAAT,QAAyB,aAAzB;AAEAC,YAAY,CAACC,SAAb,CAAuBC,KAAvB,GAA+B,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;AACtD,MAAIC,QAAQ,CAACC,UAAT,KAAwB,SAA5B,EAAuC;AACrC,WAAOF,OAAO,EAAd;AACD;;AACDC,EAAAA,QAAQ,CAACE,gBAAT,CAA0B,kBAA1B,EAA8C;AAAA,WAAMH,OAAO,EAAb;AAAA,GAA9C;AACA,SAAO,IAAP;AACD,CAN8B,CAA/B;;AAQA,SAASI,QAAT,GAAoB;AAClB;AACA,MAAMC,SAAS,GAAGJ,QAAQ,CAACK,cAAT,CAAwB,YAAxB,CAAlB;;AAEA,MAAID,SAAJ,EAAe;AACbb,IAAAA,MAAM,CAAC,EAAC,QAAD;AAAU,MAAA,QAAQ,EAAC;AAAnB,MAAD,EAA4Ba,SAA5B,CAAN;AACD;;AAEDZ,EAAAA,uBAAuB,GAAGc,IAA1B,CAA+B,gBAAgC;AAAA,QAA7BC,WAA6B,QAA7BA,WAA6B;AAAA,QAAhBC,SAAgB,QAAhBA,SAAgB;AAC7DC,IAAAA,MAAM,CAACF,WAAP,GAAqBA,WAArB;AACAE,IAAAA,MAAM,CAACD,SAAP,GAAmBA,SAAnB;AAEA,QAAME,IAAI,GAAGV,QAAQ,CAACK,cAAT,CAAwB,iBAAxB,CAAb;AAJ6D,wBAKPK,IAAI,CAACC,OALE;AAAA,QAKrDC,OALqD,iBAKrDA,OALqD;AAAA,QAK5CC,aAL4C,iBAK5CA,aAL4C;AAAA,QAK7BC,OAL6B,iBAK7BA,OAL6B;AAAA,QAKpBC,QALoB,iBAKpBA,QALoB;AAO7DxB,IAAAA,MAAM,CACJ,EAAC,WAAD;AACE,MAAA,OAAO,EAAEqB,OADX;AAEE,MAAA,aAAa,EAAEC,aAFjB;AAGE,MAAA,OAAO,EAAEC,OAHX;AAIE,MAAA,QAAQ,EAAEC;AAJZ,MADI,EAOJL,IAPI,EAQJA,IAAI,CAACM,iBARD,CAAN;AAUD,GAjBD;AAkBD;;AAEDhB,QAAQ,CAACH,KAAT,CAAeS,IAAf,CAAoB,YAAM;AACxBH,EAAAA,QAAQ;AACRM,EAAAA,MAAM,CAACQ,YAAP,CAAoBC,EAApB,CAAuB,QAAvB,EAAiC,YAAM;AACrC,QAAIlB,QAAQ,CAACK,cAAT,CAAwB,cAAxB,CAAJ,EAA6C;AAC3CF,MAAAA,QAAQ;AACT;AACF,GAJD;AAKD,CAPD","sourcesContent":["import { h, render } from 'preact';\nimport { getUserDataAndCsrfToken } from '../chat/util';\nimport ArticleForm from '../article-form/articleForm';\nimport { Snackbar } from '../Snackbar';\n\nHTMLDocument.prototype.ready = new Promise((resolve) => {\n  if (document.readyState !== 'loading') {\n    return resolve();\n  }\n  document.addEventListener('DOMContentLoaded', () => resolve());\n  return null;\n});\n\nfunction loadForm() {\n  // The Snackbar for the article page\n  const snackZone = document.getElementById('snack-zone');\n\n  if (snackZone) {\n    render(<Snackbar lifespan=\"3\" />, snackZone);\n  }\n\n  getUserDataAndCsrfToken().then(({ currentUser, csrfToken }) => {\n    window.currentUser = currentUser;\n    window.csrfToken = csrfToken;\n\n    const root = document.getElementById('js-article-form');\n    const { article, organizations, version, siteLogo } = root.dataset;\n\n    render(\n      <ArticleForm\n        article={article}\n        organizations={organizations}\n        version={version}\n        siteLogo={siteLogo}\n      />,\n      root,\n      root.firstElementChild,\n    );\n  });\n}\n\ndocument.ready.then(() => {\n  loadForm();\n  window.InstantClick.on('change', () => {\n    if (document.getElementById('article-form')) {\n      loadForm();\n    }\n  });\n});\n"]},"metadata":{},"sourceType":"module"}