{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport IntroSlide from './components/IntroSlide';\nimport EmailPreferencesForm from './components/EmailPreferencesForm';\nimport FollowTags from './components/FollowTags';\nimport FollowUsers from './components/FollowUsers';\nimport ProfileForm from './components/ProfileForm';\n\nvar Onboarding = /*#__PURE__*/function (_Component) {\n  _inherits(Onboarding, _Component);\n\n  var _super = _createSuper(Onboarding);\n\n  function Onboarding(props) {\n    var _this;\n\n    _classCallCheck(this, Onboarding);\n\n    _this = _super.call(this, props);\n    var url = new URL(window.location);\n    var previousLocation = url.searchParams.get('referrer');\n    var slides = [IntroSlide, FollowTags, ProfileForm, FollowUsers, EmailPreferencesForm];\n    _this.nextSlide = _this.nextSlide.bind(_assertThisInitialized(_this));\n    _this.prevSlide = _this.prevSlide.bind(_assertThisInitialized(_this));\n    _this.slidesCount = slides.length;\n    _this.state = {\n      currentSlide: 0\n    };\n    _this.slides = slides.map(function (SlideComponent, index) {\n      return h(SlideComponent, {\n        next: _this.nextSlide,\n        prev: _this.prevSlide,\n        slidesCount: _this.slidesCount,\n        currentSlideIndex: index,\n        communityConfig: props.communityConfig,\n        previousLocation: previousLocation\n      });\n    });\n    return _this;\n  }\n\n  _createClass(Onboarding, [{\n    key: \"nextSlide\",\n    value: function nextSlide() {\n      var currentSlide = this.state.currentSlide;\n      var nextSlide = currentSlide + 1;\n\n      if (nextSlide < this.slides.length) {\n        this.setState({\n          currentSlide: nextSlide\n        });\n      } else {\n        // Redirect to the main feed at the end of onboarding.\n        window.location.href = '/';\n      }\n    }\n  }, {\n    key: \"prevSlide\",\n    value: function prevSlide() {\n      var currentSlide = this.state.currentSlide;\n      var prevSlide = currentSlide - 1;\n\n      if (prevSlide >= 0) {\n        this.setState({\n          currentSlide: prevSlide\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var currentSlide = this.state.currentSlide;\n      var communityConfig = this.props.communityConfig;\n      return h(\"main\", {\n        className: \"onboarding-body\",\n        style: communityConfig.communityBackground && {\n          backgroundImage: \"url(\".concat(communityConfig.communityBackground, \")\")\n        }\n      }, this.slides[currentSlide]);\n    }\n  }]);\n\n  return Onboarding;\n}(Component);\n\nexport { Onboarding as default };\nOnboarding.propTypes = {\n  communityConfig: PropTypes.shape({\n    communityName: PropTypes.string.isRequired,\n    communityBackground: PropTypes.string.isRequired,\n    communityLogo: PropTypes.string.isRequired,\n    communityDescription: PropTypes.string.isRequired\n  }).isRequired\n};","map":{"version":3,"sources":["/Users/nmadhab/hobby/forem/app/javascript/onboarding/Onboarding.jsx"],"names":["h","Component","PropTypes","IntroSlide","EmailPreferencesForm","FollowTags","FollowUsers","ProfileForm","Onboarding","props","url","URL","window","location","previousLocation","searchParams","get","slides","nextSlide","bind","prevSlide","slidesCount","length","state","currentSlide","map","SlideComponent","index","communityConfig","setState","href","communityBackground","backgroundImage","propTypes","shape","communityName","string","isRequired","communityLogo","communityDescription"],"mappings":"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","sourcesContent":["import { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\n\nimport IntroSlide from './components/IntroSlide';\nimport EmailPreferencesForm from './components/EmailPreferencesForm';\nimport FollowTags from './components/FollowTags';\nimport FollowUsers from './components/FollowUsers';\nimport ProfileForm from './components/ProfileForm';\n\nexport default class Onboarding extends Component {\n  constructor(props) {\n    super(props);\n\n    const url = new URL(window.location);\n    const previousLocation = url.searchParams.get('referrer');\n\n    const slides = [\n      IntroSlide,\n      FollowTags,\n      ProfileForm,\n      FollowUsers,\n      EmailPreferencesForm,\n    ];\n\n    this.nextSlide = this.nextSlide.bind(this);\n    this.prevSlide = this.prevSlide.bind(this);\n    this.slidesCount = slides.length;\n\n    this.state = {\n      currentSlide: 0,\n    };\n\n    this.slides = slides.map((SlideComponent, index) => (\n      <SlideComponent\n        next={this.nextSlide}\n        prev={this.prevSlide}\n        slidesCount={this.slidesCount}\n        currentSlideIndex={index}\n        communityConfig={props.communityConfig}\n        previousLocation={previousLocation}\n      />\n    ));\n  }\n\n  nextSlide() {\n    const { currentSlide } = this.state;\n    const nextSlide = currentSlide + 1;\n    if (nextSlide < this.slides.length) {\n      this.setState({\n        currentSlide: nextSlide,\n      });\n    } else {\n      // Redirect to the main feed at the end of onboarding.\n      window.location.href = '/';\n    }\n  }\n\n  prevSlide() {\n    const { currentSlide } = this.state;\n    const prevSlide = currentSlide - 1;\n    if (prevSlide >= 0) {\n      this.setState({\n        currentSlide: prevSlide,\n      });\n    }\n  }\n\n  render() {\n    const { currentSlide } = this.state;\n    const { communityConfig } = this.props;\n    return (\n      <main\n        className=\"onboarding-body\"\n        style={\n          communityConfig.communityBackground && {\n            backgroundImage: `url(${communityConfig.communityBackground})`,\n          }\n        }\n      >\n        {this.slides[currentSlide]}\n      </main>\n    );\n  }\n}\n\nOnboarding.propTypes = {\n  communityConfig: PropTypes.shape({\n    communityName: PropTypes.string.isRequired,\n    communityBackground: PropTypes.string.isRequired,\n    communityLogo: PropTypes.string.isRequired,\n    communityDescription: PropTypes.string.isRequired,\n  }).isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}