{"version":3,"file":"honeybadger.min.js","sources":["../src/util/sanitize.js","../src/util/browser.js","../src/main.js","../src/builder.js"],"sourcesContent":["export default function sanitize(obj, maxDepth) {\n  let seenObjects = [];\n  function seen(obj) {\n    if (!obj || typeof(obj) !== 'object') { return false; }\n    for (let i = 0; i < seenObjects.length; i++) {\n      const value = seenObjects[i];\n      if (value === obj) {\n        return true;\n      }\n    }\n    seenObjects.push(obj);\n    return false;\n  }\n\n  function canSerialize(obj) {\n    // Functions are TMI and Symbols can't convert to strings.\n    if (/function|symbol/.test(typeof(obj))) { return false; }\n\n    if (obj === null) { return false };\n\n    // No prototype, likely created with `Object.create(null)`.\n    if (typeof obj === 'object' && typeof obj.hasOwnProperty === 'undefined') { return false; }\n\n    return true;\n  }\n\n  function serialize(obj, depth) {\n    if (!depth) { depth = 0; }\n    if (depth >= maxDepth) {\n      return '[DEPTH]';\n    }\n\n    // Inspect invalid types\n    if (!canSerialize(obj)) { return Object.prototype.toString.call(obj); }\n\n    // Halt circular references\n    if (seen(obj)) {\n      return '[RECURSION]';\n    }\n\n    // Serialize inside arrays\n    if (Array.isArray(obj)) {\n      return obj.map(o => serialize(o, depth+1));\n    }\n\n    // Serialize inside objects\n    if (typeof(obj) === 'object') {\n      let ret = {};\n      for (const k in obj) {\n        const v = obj[k];\n        if (Object.prototype.hasOwnProperty.call(obj, k) && (k != null) && (v != null)) {\n          ret[k] = serialize(v, depth+1);\n        }\n      }\n      return ret;\n    }\n\n    // Return everything else untouched\n    return obj;\n  }\n\n  return serialize(obj);\n}\n","/**\n * Converts an HTMLElement into a human-readable string.\n * @param {!HTMLElement} element\n * @return {string}\n */\nexport function stringNameOfElement(element) {\n  if (!element || !element.tagName) { return ''; }\n\n  let name = element.tagName.toLowerCase();\n\n  // Ignore the root <html> element in selectors and events.\n  if (name === 'html') { return ''; }\n\n  if (element.id) {\n    name += `#${element.id}`;\n  }\n\n  const stringClassNames = element.getAttribute('class');\n  if (stringClassNames) {\n    stringClassNames.split(/\\s+/).forEach(className => {\n      name += `.${className}`;\n    });\n  }\n\n  ['alt', 'name', 'title', 'type'].forEach(attrName => {\n    let attr = element.getAttribute(attrName);\n    if (attr) {\n      name += `[${attrName}=\"${attr}\"]`;\n    }\n  });\n\n  const siblings = getSiblings(element);\n  if (siblings.length > 1) {\n    name += `:nth-child(${Array.prototype.indexOf.call(siblings, element) + 1})`;\n  }\n\n  return name;\n}\n\nexport function stringSelectorOfElement(element) {\n  const name = stringNameOfElement(element);\n\n  if (element.parentNode && element.parentNode.tagName) {\n    const parentName = stringSelectorOfElement(element.parentNode);\n    if (parentName.length > 0) {\n      return `${parentName} > ${name}`;\n    }\n  }\n\n  return name;\n}\n\nexport function stringTextOfElement(element) {\n  let text = element.textContent || element.innerText || '';\n  if (!text && (element.type === 'submit' || element.type === 'button')) { text = element.value; }\n  return truncate(text.trim(), 300);\n}\n\nexport function nativeFetch() {\n  if (!window.fetch) { return false; }\n  if (isNative(window.fetch)) { return true; }\n\n  // If fetch isn't native, it may be wrapped by someone else. Try to get\n  // a pristine function from an iframe.\n  try {\n    const sandbox = document.createElement('iframe');\n    sandbox.style.display = 'none';\n    document.head.appendChild(sandbox);\n    const result = sandbox.contentWindow.fetch && isNative(sandbox.contentWindow.fetch);\n    document.head.removeChild(sandbox);\n    return result;\n  } catch(err) {\n    if (console && console.warn) {\n      console.warn('failed to detect native fetch via iframe: ' + err);\n    }\n  }\n\n  return false;\n}\n\nfunction isNative(func) {\n  return func.toString().indexOf('native') !== -1;\n}\n\nexport function parseURL(url) {\n  // Regexp: https://tools.ietf.org/html/rfc3986#appendix-B\n  const match = url.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/) || {};\n\n  return {\n    protocol: match[2],\n    host: match[4],\n    pathname: match[5],\n  };\n}\n\nexport function localURLPathname(url) {\n  const parsed = parseURL(url);\n  const parsedDocURL = parseURL(document.URL);\n\n  // URL must be relative\n  if (!parsed.host || !parsed.protocol) { return parsed.pathname; }\n\n  // Same domain\n  if (parsed.protocol === parsedDocURL.protocol && parsed.host === parsedDocURL.host) {\n    return parsed.pathname;\n  }\n\n  // x-domain\n  return `${parsed.protocol}://${parsed.host}${parsed.pathname}`;\n}\n\n\n// Helpers\n\nfunction getSiblings(element) {\n  try {\n    const nodes = element.parentNode.childNodes;\n    const siblings = [];\n\n    Array.prototype.forEach.call(nodes, node => {\n      if (node.tagName && node.tagName === element.tagName) {\n        siblings.push(node);\n      }\n    });\n\n    return siblings;\n  } catch(e) {\n    return [];\n  }\n}\n\nfunction truncate(string, length) {\n  if (string.length > length) {\n    string = string.substr(0, length) + '...';\n  }\n  return string;\n}\n","import builder from './builder.js';\n\nlet factory = builder();\nlet singleton = factory();\n\nsingleton.factory = factory;\n\nexport default singleton;\n","import sanitize from './util/sanitize.js';\nimport { stringNameOfElement, stringSelectorOfElement, stringTextOfElement, nativeFetch, localURLPathname } from './util/browser.js';\n\nexport default function builder() {\n  var VERSION = '__VERSION__',\n      NOTIFIER = {\n        name: 'honeybadger-js',\n        url: 'https://github.com/honeybadger-io/honeybadger-js',\n        version: VERSION,\n        language: 'javascript'\n      };\n\n  // Used to control initial setup across clients.\n  var loaded = false,\n      installed = false,\n      factoryCount = 0;\n\n  // Used to prevent reporting duplicate errors across instances.\n  var currentErr;\n\n  // Utilities.\n  function merge(obj1, obj2) {\n    var obj3 = {};\n    for (var k in obj1) { obj3[k] = obj1[k]; }\n    for (var k in obj2) { obj3[k] = obj2[k]; }\n    return obj3;\n  }\n\n  // Returns a new object with properties from other object.\n  function newObject(obj) {\n    if (typeof(obj) !== 'object') { return {}; }\n    let new_obj = {};\n    for (var k in obj) { new_obj[k] = obj[k]; }\n    return new_obj;\n  }\n\n  function mergeErr(err1, err2) {\n    let ret = merge(err1, err2);\n\n    if (err1.context && err2.context) {\n      ret.context = merge(err1.context, err2.context);\n    }\n\n    return ret;\n  }\n\n  function currentErrIs(err) {\n    if (!currentErr) { return false; }\n    if (currentErr.name !== err.name) { return false; }\n    if (currentErr.message !== err.message) { return false; }\n    if (currentErr.stack !== err.stack) { return false; }\n    return true;\n  }\n\n  function isIgnored(err, patterns) {\n    if (!Array.isArray(patterns)) { return false; }\n    return patterns.some((p) => p.test(err.message));\n  }\n\n  function encodeCookie(object) {\n    if (typeof object !== 'object') {\n      return undefined;\n    }\n\n    var cookies = [];\n    for (var k in object) {\n      cookies.push(k + '=' + object[k]);\n    }\n\n    return cookies.join(';');\n  }\n\n  function stackTrace(err) {\n    // From TraceKit: Opera 10 *destroys* its stacktrace property if you try to\n    // access the stack property first.\n    return err.stacktrace || err.stack || undefined;\n  }\n\n  function generateStackTrace(err) {\n    var stack;\n    var maxStackSize = 10;\n\n    if (err && (stack = stackTrace(err))) {\n      return {stack: stack, generator: undefined};\n    }\n\n    try {\n      throw new Error('');\n    } catch(e) {\n      if (stack = stackTrace(e)) {\n        return {stack: stack, generator: 'throw'};\n      }\n    }\n\n    stack = ['<call-stack>'];\n    var curr = arguments.callee;\n    while (curr && stack.length < maxStackSize) {\n      if (/function(?:\\s+([\\w$]+))+\\s*\\(/.test(curr.toString())) {\n        stack.push(RegExp.$1 || '<anonymous>');\n      } else {\n        stack.push('<anonymous>');\n      }\n      try {\n        curr = curr.caller;\n      } catch (e) {\n        break;\n      }\n    }\n\n    return {stack: stack.join('\\n'), generator: 'walk'};\n  }\n\n  function checkHandlers(handlers, err, response) {\n    var handler, i, len;\n    for (i = 0, len = handlers.length; i < len; i++) {\n      handler = handlers[i];\n      if (handler(err, response) === false) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function objectIsEmpty(obj) {\n    for (let k in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, k)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  function objectIsExtensible(obj) {\n    if (typeof Object.isExtensible !== 'function') { return true; }\n    return Object.isExtensible(obj);\n  }\n\n  // Client factory.\n  var factory = (function(opts) {\n    factoryCount += 1;\n    const singleton = (factoryCount === 1);\n    const notSingleton = !singleton;\n    const defaultProps = [];\n    const queue = [];\n    const self = {\n      context: {},\n      beforeNotifyHandlers: [],\n      afterNotifyHandlers: [],\n      breadcrumbs: [],\n      errorsSent: 0,\n      breadcrumbsEnabled: {\n        dom: true,\n        network: true,\n        navigation: true,\n        console: true\n      }\n    };\n    if (typeof opts === 'object') {\n      for (var k in opts) { self[k] = opts[k]; }\n    }\n\n    function log() {\n      var console = window.console;\n      if (console) {\n        var args = Array.prototype.slice.call(arguments);\n        args.unshift('[Honeybadger]');\n        console.log.apply(console, args);\n      }\n    }\n\n    function debug() {\n      if (config('debug')) {\n        return log.apply(this, arguments);\n      }\n    }\n\n    function config(key, fallback) {\n      var value = self[key];\n      if (value === undefined) { value = self[key.toLowerCase()]; }\n      if (value === 'false') { value = false; }\n      if (value !== undefined) { return value; }\n      return fallback;\n    }\n\n    function onErrorEnabled() {\n      if (notSingleton) { return false; }\n      return config('onerror', true);\n    }\n\n    function onUnhandledRejectionEnabled() {\n      if (notSingleton) { return false; }\n      return config('onunhandledrejection', true);\n    }\n\n    function breadcrumbsEnabled(type) {\n      if (self.breadcrumbsEnabled === true) { return true; }\n      if (type) { return self.breadcrumbsEnabled[type] === true; }\n      return self.breadcrumbsEnabled !== false;\n    }\n\n    function baseURL() {\n      return 'http' + ((config('ssl', true) && 's') || '') + '://' + config('host', 'api.honeybadger.io');\n    }\n\n    function request(apiKey, notice) {\n      try {\n        let payload = buildPayload(notice);\n        let x = new XMLHttpRequest();\n        x.open('POST', baseURL() + '/v1/notices/js', config('async', true));\n\n        x.setRequestHeader('X-API-Key', apiKey);\n        x.setRequestHeader('Content-Type', 'application/json');\n        x.setRequestHeader('Accept', 'text/json, application/json');\n\n        x.send(JSON.stringify(sanitize(payload, config('max_depth', 8))));\n        x.onload = function() {\n          let handlers = Array.prototype.slice.call(self.afterNotifyHandlers);\n          if (notice.afterNotify) { handlers.unshift(notice.afterNotify); }\n\n          if (x.status !== 201) {\n            checkHandlers(handlers, new Error(`Bad HTTP response: ${x.status}`), notice);\n            debug(`Unable to send error report: ${x.status}: ${x.statusText}`, x, notice);\n            return;\n          }\n          checkHandlers(handlers, undefined, merge(notice, {\n            id: JSON.parse(x.response).id\n          }));\n          debug('Error report sent', payload);\n        };\n      } catch(e) {\n        checkHandlers(self.afterNotifyHandlers, e, notice);\n        log('Unable to send error report: error while initializing request', e, notice);\n      }\n    }\n\n    function send(notice) {\n      currentErr = null;\n\n      if (config('disabled', false)) {\n        debug('Dropping notice: honeybadger.js is disabled', notice);\n        return false;\n      }\n\n      var apiKey = config('apiKey', config('api_key'));\n      if (!apiKey) {\n        log('Unable to send error report: no API key has been configured');\n        return false;\n      }\n\n      if (exceedsMaxErrors()) {\n        debug('Dropping notice: max errors exceeded', notice);\n        return false;\n      }\n\n      incrementErrorsCount();\n\n      request(apiKey, notice);\n\n      return true;\n    }\n\n    function buildPayload(err) {\n      const data = {};\n      if (err.userAgent) { data['HTTP_USER_AGENT'] = err.userAgent; }\n      if (err.referrer) { data['HTTP_REFERER'] = err.referrer; }\n      if (typeof err.cookies === 'string') {\n        data['HTTP_COOKIE'] = err.cookies;\n      } else if (typeof err.cookies === 'object') {\n        data['HTTP_COOKIE'] = encodeCookie(err.cookies);\n      }\n\n      return {\n        'notifier': NOTIFIER,\n        'breadcrumbs': {\n          'enabled': breadcrumbsEnabled(),\n          'trail': err.breadcrumbs,\n        },\n        'error': {\n          'class': err.name,\n          'message': err.message,\n          'backtrace': err.stack,\n          'generator': err.generator,\n          'fingerprint': err.fingerprint\n        },\n        'request': {\n          'url': err.url,\n          'component': err.component,\n          'action': err.action,\n          'context': err.context,\n          'cgi_data': data,\n          'params': err.params\n        },\n        'server': {\n          'project_root': err.projectRoot,\n          'environment_name': err.environment,\n          'revision': err.revision\n        }\n      };\n    }\n\n    function notify(err, generated) {\n      if (!err) { err = {}; }\n\n      if (Object.prototype.toString.call(err) === '[object Error]') {\n        var e = err;\n        err = merge(err, {name: e.name, message: e.message, stack: stackTrace(e)});\n      }\n\n      if (!(typeof err === 'object')) {\n        var m = String(err);\n        err = {message: m};\n      }\n\n      if (currentErrIs(err)) {\n        // Skip the duplicate error.\n        return false;\n      } else if (currentErr && loaded) {\n        // This is a different error, send the old one now.\n        send(currentErr);\n      }\n\n      if (objectIsEmpty(err)) { return false; }\n\n      let generator;\n      if (generated) {\n        err.stack = generated.stack;\n        generator = generated.generator;\n      }\n\n      err = merge(err, {\n        name: err.name || 'Error',\n        context: merge(self.context, err.context),\n        url: err.url || document.URL,\n        projectRoot: err.projectRoot || err.project_root || config('projectRoot', config('project_root', window.location.protocol + '//' + window.location.host)),\n        environment: err.environment || config('environment'),\n        component: err.component || config('component'),\n        action: err.action || config('action'),\n        revision: err.revision || config('revision'),\n        userAgent: err.userAgent || navigator.userAgent,\n        referrer: err.referrer || document.referrer\n      });\n\n      self.addBreadcrumb('Honeybadger Notice', {\n        category: 'notice',\n        metadata: {\n          message: err.message,\n          name: err.name,\n          stack: err.stack\n        }\n      });\n\n      err.breadcrumbs = self.breadcrumbs.slice();\n\n      let stack_before_handlers = err.stack;\n      if (checkHandlers(self.beforeNotifyHandlers, err)) { return false; }\n      if (err.stack != stack_before_handlers) {\n        // Stack changed, so it's not generated.\n        generator = undefined;\n      }\n\n      if (isIgnored(err, config('ignorePatterns'))) { return false; }\n\n      err.generator = generator;\n\n      currentErr = err;\n\n      if (loaded) {\n        debug('Deferring notice', err);\n        window.setTimeout(function(){\n          if (currentErrIs(err)) {\n            send(err);\n          }\n        });\n      } else {\n        debug('Queuing notice', err);\n        queue.push(err);\n      }\n\n      return err;\n    }\n\n    var preferCatch = true;\n    // IE < 10\n    if (!window.atob) { preferCatch = false; }\n    // See https://developer.mozilla.org/en-US/docs/Web/API/ErrorEvent\n    if (window.ErrorEvent) {\n      try {\n        if ((new window.ErrorEvent('')).colno === 0) {\n          preferCatch = false;\n        }\n      } catch(_e) {}\n    }\n\n    // wrap always returns the same function so that callbacks can be removed via\n    // removeEventListener.\n    function wrap(fn, opts) {\n      if (!opts) { opts = {}; }\n      try {\n        if (typeof fn !== 'function') { return fn; }\n        if (!objectIsExtensible(fn))  { return fn; }\n        if (!fn.___hb) {\n          fn.___hb = function() {\n            var onerror = onErrorEnabled();\n            // Don't catch if the browser is old or supports the new error\n            // object and there is a window.onerror handler available instead.\n            if ((preferCatch && (onerror || opts.force)) || (opts.force && !onerror)) {\n              try {\n                return fn.apply(this, arguments);\n              } catch (err) {\n                let generated = { stack: stackTrace(err) };\n                self.addBreadcrumb(\n                  opts.component ? `${opts.component}: ${err.name}` : err.name,\n                  {\n                    category: 'error',\n                    metadata: {\n                      message: err.message,\n                      name: err.name,\n                      stack: generated.stack\n                    }\n                  }\n                );\n                notify(err, generated);\n                throw(err);\n              }\n            } else {\n              return fn.apply(this, arguments);\n            }\n          };\n        }\n        fn.___hb.___hb = fn.___hb;\n        return fn.___hb;\n      } catch(_e) {\n        return fn;\n      }\n    }\n\n    // Public API.\n    self.notify = function(err, name, extra) {\n      if (!err) { err = {}; }\n\n      if (Object.prototype.toString.call(err) === '[object Error]') {\n        var e = err;\n        err = merge(err, {name: e.name, message: e.message, stack: stackTrace(e)});\n      }\n\n      if (!(typeof err === 'object')) {\n        var m = String(err);\n        err = {message: m};\n      }\n\n      if (name && !(typeof name === 'object')) {\n        var n = String(name);\n        name = {name: n};\n      }\n\n      if (name) {\n        err = mergeErr(err, name);\n      }\n      if (typeof extra === 'object') {\n        err = mergeErr(err, extra);\n      }\n\n      return notify(err, generateStackTrace(err));\n    };\n\n    self.wrap = function(func) {\n      return wrap(func, { force: true });\n    };\n\n    self.setContext = function(context) {\n      if (typeof context === 'object') {\n        self.context = merge(self.context, context);\n      }\n      return self;\n    };\n\n    self.resetContext = function(context) {\n      if (typeof context === 'object') {\n        self.context = merge({}, context);\n      } else {\n        self.context = {};\n      }\n      return self;\n    };\n\n    self.configure = function(opts) {\n      for (var k in opts) {\n        self[k] = opts[k];\n      }\n      if (singleton && !installed) {\n        installed = true;\n        integrations.forEach((integration) => integration());\n      }\n      return self;\n    };\n\n    self.beforeNotify = function(handler) {\n      self.beforeNotifyHandlers.push(handler);\n      return self;\n    };\n\n    self.afterNotify = function(handler) {\n      self.afterNotifyHandlers.push(handler);\n      return self;\n    };\n\n    var indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n    self.reset = function() {\n      self.context = {};\n      self.beforeNotifyHandlers = [];\n      self.breadcrumbs = [];\n      for (var k in self) {\n        if (indexOf.call(defaultProps, k) == -1) {\n          self[k] = undefined;\n        }\n      }\n      self.resetMaxErrors();\n      return self;\n    };\n\n    self.resetMaxErrors = function() {\n      return (self.errorsSent=0);\n    };\n\n    self.getVersion = function() {\n      return VERSION;\n    };\n\n    self.addBreadcrumb = function(message, opts) {\n      if (!breadcrumbsEnabled()) return;\n\n      opts = opts || {};\n\n      const metadata = newObject(opts.metadata);\n      const category = opts.category || 'custom';\n      const timestamp = new Date().toISOString();\n\n      self.breadcrumbs.push({\n        category: category,\n        message: message,\n        metadata: metadata,\n        timestamp: timestamp,\n      });\n\n      const limit = config('maxBreadcrumbs', 40);\n      if (self.breadcrumbs.length > limit) {\n        self.breadcrumbs = self.breadcrumbs.slice(self.breadcrumbs.length - limit);\n      }\n\n      return self;\n    };\n\n    const integrations = [];\n\n    // Install instrumentation.\n    // This should happen once for the first factory call.\n    function instrument(object, name, replacement) {\n      if (notSingleton) { return; }\n      if (!object || !name || !replacement || !(name in object)) { return; }\n      let original = object[name];\n      while (original && original.__hb_original) {\n        original = original.__hb_original;\n      }\n      object[name] = replacement(original);\n      object[name].__hb_original = original;\n    }\n\n    // Breadcrumbs: instrument click events\n    integrations.push(function() {\n      if (!breadcrumbsEnabled('dom')) { return; }\n\n      window.addEventListener('click', (event) => {\n        let message, selector, text;\n        try {\n          message = stringNameOfElement(event.target);\n          selector = stringSelectorOfElement(event.target);\n          text = stringTextOfElement(event.target);\n        } catch(e) {\n          message = 'UI Click';\n          selector = '[unknown]';\n          text = '[unknown]';\n        }\n\n        // There's nothing to display\n        if (message.length === 0) { return; };\n\n        self.addBreadcrumb(message, {\n          category: 'ui.click',\n          metadata: {\n            selector,\n            text,\n            event,\n          },\n        });\n      }, true);\n    });\n\n    // Breadcrumbs: instrument XMLHttpRequest\n    integrations.push(function() {\n      if (!breadcrumbsEnabled('network')) { return; }\n\n      // -- On xhr.open: capture initial metadata\n      instrument(XMLHttpRequest.prototype, 'open', function(original) {\n        return function() {\n          const xhr = this;\n          const url = arguments[1];\n          const method = typeof arguments[0] === 'string' ? arguments[0].toUpperCase() : arguments[0];\n          const message = `${method} ${localURLPathname(url)}`;\n\n          this.__hb_xhr = {\n            type: 'xhr',\n            method,\n            url,\n            message,\n          };\n\n          if (typeof original === 'function') {\n            original.apply(xhr, arguments);\n          }\n        };\n      });\n\n      // -- On xhr.send: set up xhr.onreadystatechange to report breadcrumb\n      instrument(XMLHttpRequest.prototype, 'send', function(original) {\n        return function() {\n          const xhr = this;\n\n          function onreadystatechangeHandler() {\n            if (xhr.readyState === 4) {\n              let message;\n\n              if (xhr.__hb_xhr) {\n                xhr.__hb_xhr.status_code = xhr.status;\n                message = xhr.__hb_xhr.message;\n                delete xhr.__hb_xhr.message;\n              }\n\n              self.addBreadcrumb(message || 'XMLHttpRequest', {\n                category: 'request',\n                metadata: xhr.__hb_xhr,\n              });\n            }\n          }\n\n          if ('onreadystatechange' in xhr && typeof xhr.onreadystatechange === 'function') {\n            instrument(xhr, 'onreadystatechange', function(original) {\n              return function() {\n                onreadystatechangeHandler();\n\n                if (typeof original === 'function') {\n                  original.apply(this, arguments);\n                }\n              };\n            });\n          } else {\n            xhr.onreadystatechange = onreadystatechangeHandler;\n          }\n\n          if (typeof original === 'function') {\n            original.apply(xhr, arguments);\n          }\n        };\n      });\n    });\n\n    // Breadcrumbs: instrument fetch\n    integrations.push(function() {\n      if (!breadcrumbsEnabled('network')) { return; }\n\n      if (!nativeFetch()) {\n        // Polyfills use XHR.\n        return;\n      }\n\n      instrument(window, 'fetch', function(original) {\n        return function() {\n          const input = arguments[0];\n\n          let method = 'GET';\n          let url;\n\n          if (typeof input === 'string') {\n            url = input;\n          } else if ('Request' in window && input instanceof Request) {\n            url = input.url;\n            if (input.method) {\n              method = input.method;\n            }\n          } else {\n            url = String(input);\n          }\n\n          if (arguments[1] && arguments[1].method) {\n            method = arguments[1].method;\n          }\n\n          if (typeof method === 'string') {\n            method = method.toUpperCase();\n          }\n\n          const message = `${method} ${localURLPathname(url)}`;\n          const metadata = {\n            type: 'fetch',\n            method,\n            url,\n          };\n\n          return original\n            .apply(this, arguments)\n            .then(function(response) {\n              metadata.status_code = response.status;\n              self.addBreadcrumb(message, {\n                category: 'request',\n                metadata,\n              });\n              return response;\n            })\n            .catch(function(error) {\n              self.addBreadcrumb('fetch error', {\n                category: 'error',\n                metadata,\n              });\n\n              throw error;\n            });\n        };\n      });\n    });\n\n    // Breadcrumbs: instrument navigation\n    integrations.push(function() {\n      if (!breadcrumbsEnabled('navigation')) { return; }\n\n      // The last known href of the current page\n      let lastHref = window.location.href;\n\n      function recordUrlChange(from, to) {\n        lastHref = to;\n        self.addBreadcrumb('Page changed', {\n          category: 'navigation',\n          metadata: {\n            from,\n            to,\n          },\n        });\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onpopstate\n      instrument(window, 'onpopstate', function(original) {\n        return function() {\n          recordUrlChange(lastHref, window.location.href);\n          if (original) {\n            return original.apply(this, arguments);\n          }\n        };\n      });\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/History/pushState\n      // https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState\n      function historyWrapper(original) {\n        return function() {\n          const url = arguments.length > 2 ? arguments[2] : undefined;\n          if (url) {\n            recordUrlChange(lastHref, String(url));\n          }\n          return original.apply(this, arguments);\n        };\n      }\n      instrument(window.history, 'pushState', historyWrapper);\n      instrument(window.history, 'replaceState', historyWrapper);\n    });\n\n    // Breadcrumbs: instrument console\n    integrations.push(function() {\n      if (!breadcrumbsEnabled('console')) { return; }\n\n      function inspectArray(obj) {\n        if (!Array.isArray(obj)) { return ''; }\n\n        return obj.map(value => {\n          try {\n            return String(value);\n          } catch (e) {\n            return '[unknown]';\n          }\n        }).join(' ');\n      }\n\n      ['debug', 'info', 'warn', 'error', 'log'].forEach(level => {\n        instrument(window.console, level, function(original) {\n          return function() {\n            const args = Array.prototype.slice.call(arguments);\n            const message = inspectArray(args);\n            const opts = {\n              category: 'log',\n              metadata: {\n                level: level,\n                arguments: sanitize(args, 3),\n              },\n            };\n\n            self.addBreadcrumb(message, opts);\n\n            if (typeof original === 'function') {\n              Function.prototype.apply.call(original, window.console, arguments);\n            }\n          };\n        });\n      });\n    });\n\n    // Wrap timers\n    (function() {\n      function instrumentTimer(wrapOpts) {\n        return function(original) {\n          // See https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout\n          return function(func, delay) {\n            if (typeof func === 'function') {\n              var args = Array.prototype.slice.call(arguments, 2);\n              func = wrap(func, wrapOpts);\n              return original(function() {\n                func.apply(null, args);\n              }, delay);\n            } else {\n              return original(func, delay);\n            }\n          };\n        };\n      };\n      instrument(window, 'setTimeout', instrumentTimer({ component: 'setTimeout' }));\n      instrument(window, 'setInterval', instrumentTimer({ component: 'setInterval' }));\n    })();\n\n    // Wrap event listeners\n    // Event targets borrowed from bugsnag-js:\n    // See https://github.com/bugsnag/bugsnag-js/blob/d55af916a4d3c7757f979d887f9533fe1a04cc93/src/bugsnag.js#L542\n    'EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload'.replace(/\\w+/g, function (prop) {\n      var prototype = window[prop] && window[prop].prototype;\n      if (prototype && prototype.hasOwnProperty && prototype.hasOwnProperty('addEventListener')) {\n        instrument(prototype, 'addEventListener', function(original) {\n          const wrapOpts = {component: `${prop}.prototype.addEventListener`};\n\n          // See https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n          return function(type, listener, useCapture, wantsUntrusted) {\n            try {\n              if (listener && listener.handleEvent != null) {\n                listener.handleEvent = wrap(listener.handleEvent, wrapOpts);\n              }\n            } catch(e) {\n              // Ignore 'Permission denied to access property \"handleEvent\"' errors.\n              log(e);\n            }\n            return original.call(this, type, wrap(listener, wrapOpts), useCapture, wantsUntrusted);\n          };\n        });\n        instrument(prototype, 'removeEventListener', function(original) {\n          return function(type, listener, useCapture, wantsUntrusted) {\n            original.call(this, type, listener, useCapture, wantsUntrusted);\n            return original.call(this, type, wrap(listener), useCapture, wantsUntrusted);\n          };\n        });\n      }\n    });\n\n    // Wrap window.onerror\n    instrument(window, 'onerror', function(original) {\n      function onerror(msg, url, line, col, err) {\n        debug('window.onerror callback invoked', arguments);\n\n        // Skip if the error is already being sent.\n        if (currentErr) { return; }\n\n        if (!onErrorEnabled()) { return; }\n\n        if (line === 0 && /Script error\\.?/.test(msg)) {\n          // See https://developer.mozilla.org/en/docs/Web/API/GlobalEventHandlers/onerror#Notes\n          log('Ignoring cross-domain script error: enable CORS to track these types of errors', arguments);\n          return;\n        }\n\n        // Simulate v8 stack\n        const simulatedStack = [msg, '\\n    at ? (', url || 'unknown', ':', line || 0, ':', col || 0, ')'].join('');\n\n        let generated;\n        if (err) {\n          generated = { stack: stackTrace(err) };\n          if (!generated.stack) { generated = {stack: simulatedStack}; }\n        } else {\n          // Important: leave `generated` undefined\n          err = {\n            name: 'window.onerror',\n            message: msg,\n            stack: simulatedStack\n          };\n        }\n\n        self.addBreadcrumb(\n          (err.name === 'window.onerror' || !err.name) ? 'window.onerror' : `window.onerror: ${err.name}`,\n          {\n            category: 'error',\n            metadata: {\n              message: err.message,\n              name: err.name,\n              stack: generated ? generated.stack : err.stack\n            }\n          }\n        );\n\n        notify(err, generated);\n      }\n      // See https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror\n      return function(msg, url, line, col, err) {\n        onerror(msg, url, line, col, err);\n        if (typeof original === 'function' && config('_onerror_call_orig', true)) {\n          return original.apply(this, arguments);\n        }\n        return false;\n      };\n    });\n\n    // Wrap window.onunhandledrejection\n    instrument(window, 'onunhandledrejection', function(original) {\n      // See https://developer.mozilla.org/en-US/docs/Web/API/Window/unhandledrejection_event\n      function onunhandledrejection(promiseRejectionEvent) {\n        debug('window.onunhandledrejection callback invoked', arguments);\n\n        // Skip if the error is already being sent.\n        if (currentErr) { return; }\n\n        if (!onUnhandledRejectionEnabled()) { return; }\n\n        let { reason } = promiseRejectionEvent;\n\n        if (reason instanceof Error) {\n          // simulate v8 stack\n          let fileName = reason.fileName || 'unknown';\n          let lineNumber = reason.lineNumber || 0;\n          let stackFallback = `${reason.message}\\n    at ? (${fileName}:${lineNumber})`;\n          let stack = stackTrace(reason) || stackFallback;\n          let err = {\n            name: reason.name,\n            message: `UnhandledPromiseRejectionWarning: ${reason}`,\n            stack\n          };\n          self.addBreadcrumb(\n            `window.onunhandledrejection: ${err.name}`,\n            {\n              category: 'error',\n              metadata: err\n            }\n          );\n          notify(err);\n          return;\n        }\n\n        let message = typeof reason === 'string' ? reason : JSON.stringify(reason);\n        notify({\n          name: 'window.onunhandledrejection',\n          message: `UnhandledPromiseRejectionWarning: ${message}`,\n        });\n      }\n\n      return function(promiseRejectionEvent) {\n        onunhandledrejection(promiseRejectionEvent);\n        if (typeof original === 'function') {\n          original.apply(this, arguments);\n        }\n      };\n    });\n\n    function incrementErrorsCount() {\n      return self.errorsSent++;\n    }\n\n    function exceedsMaxErrors() {\n      var maxErrors = config('maxErrors');\n      return maxErrors && self.errorsSent >= maxErrors;\n    }\n\n    // Save original state for reset()\n    for (var k in self) {\n      defaultProps.push(k);\n    }\n\n    // Initialization.\n    debug('Initializing honeybadger.js ' + VERSION);\n\n    // See https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState\n    // https://www.w3.org/TR/html5/dom.html#dom-document-readystate\n    // The 'loaded' state is for older versions of Safari.\n    if (/complete|interactive|loaded/.test(document.readyState)) {\n      loaded = true;\n      debug('honeybadger.js ' + VERSION + ' ready');\n    } else {\n      debug('Installing ready handler');\n      var domReady = function() {\n        loaded = true;\n        debug('honeybadger.js ' + VERSION + ' ready');\n        let notice;\n        while (notice = queue.pop()) {\n          send(notice);\n        }\n      };\n      if (document.addEventListener) {\n        document.addEventListener('DOMContentLoaded', domReady, true);\n      } else {\n        window.attachEvent('onload', domReady);\n      }\n    }\n\n    return self;\n  });\n\n  return factory;\n}\n"],"names":["sanitize","obj","maxDepth","seenObjects","serialize","depth","test","_typeof","hasOwnProperty","Object","prototype","toString","call","i","length","push","seen","Array","isArray","map","o","ret","k","v","stringNameOfElement","element","tagName","name","toLowerCase","id","stringClassNames","getAttribute","split","forEach","className","attrName","attr","siblings","nodes","parentNode","childNodes","node","e","getSiblings","indexOf","stringTextOfElement","text","textContent","innerText","type","value","string","substr","truncate","trim","isNative","func","parseURL","url","match","protocol","host","pathname","localURLPathname","parsed","parsedDocURL","document","URL","currentErr","VERSION","NOTIFIER","loaded","installed","factoryCount","factory","version","language","opts","singleton","notSingleton","defaultProps","queue","self","context","beforeNotifyHandlers","afterNotifyHandlers","breadcrumbs","errorsSent","breadcrumbsEnabled","dom","network","navigation","console","log","window","args","slice","arguments","unshift","apply","debug","config","this","key","fallback","undefined","onErrorEnabled","request","apiKey","notice","payload","err","data","userAgent","referrer","cookies","object","join","encodeCookie","message","stack","generator","fingerprint","component","action","params","projectRoot","environment","revision","buildPayload","x","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","onload","handlers","afterNotify","status","checkHandlers","Error","statusText","merge","parse","response","maxErrors","notify","generated","stackTrace","m","String","currentErrIs","objectIsEmpty","project_root","location","navigator","addBreadcrumb","category","metadata","patterns","stack_before_handlers","some","p","setTimeout","preferCatch","atob","ErrorEvent","colno","_e","wrap","fn","isExtensible","___hb","onerror","force","extra","mergeErr","curr","callee","RegExp","$1","caller","generateStackTrace","setContext","resetContext","configure","integrations","integration","beforeNotify","handler","item","l","reset","resetMaxErrors","getVersion","new_obj","newObject","timestamp","Date","toISOString","limit","instrument","replacement","original","__hb_original","instrumentTimer","wrapOpts","delay","addEventListener","event","selector","target","stringSelectorOfElement","parentName","method","toUpperCase","__hb_xhr","xhr","onreadystatechangeHandler","readyState","status_code","onreadystatechange","fetch","sandbox","createElement","style","display","head","appendChild","result","contentWindow","removeChild","warn","nativeFetch","input","Request","then","catch","error","lastHref","href","recordUrlChange","history","historyWrapper","from","to","level","Function","replace","prop","listener","useCapture","wantsUntrusted","handleEvent","msg","line","col","simulatedStack","onunhandledrejection","promiseRejectionEvent","reason","fileName","lineNumber","stackFallback","domReady","pop","attachEvent","obj1","obj2","obj3","err1","err2","stacktrace","len"],"mappings":"saAAe,SAASA,EAASC,EAAKC,OAChCC,EAAc,mBAyBTC,EAAUH,EAAKI,MAETH,IADCG,EAATA,GAAiB,SAEb,aAbL,kBAAkBC,OAFFL,EAmBFA,KAfN,OAARA,GAGe,WAAfM,EAAON,SAAkD,IAAvBA,EAAIO,sBAYTC,OAAOC,UAAUC,SAASC,KAAKX,OAnB5CA,cAZRA,OACPA,GAAuB,WAAhBM,EAAON,UAA4B,MAC1C,IAAIY,EAAI,EAAGA,EAAIV,EAAYW,OAAQD,OACxBV,EAAYU,KACZZ,SACL,SAGXE,EAAYY,KAAKd,GACV,EAyBHe,CAAKf,SACA,iBAILgB,MAAMC,QAAQjB,UACTA,EAAIkB,IAAI,SAAAC,UAAKhB,EAAUgB,EAAGf,EAAM,QAIrB,WAAhBE,EAAON,UAYJA,MAXDoB,EAAM,OACL,IAAMC,KAAKrB,EAAK,KACbsB,EAAItB,EAAIqB,GACVb,OAAOC,UAAUF,eAAeI,KAAKX,EAAKqB,IAAY,MAALA,GAAoB,MAALC,IAClEF,EAAIC,GAAKlB,EAAUmB,EAAGlB,EAAM,WAGzBgB,EAOJjB,CAAUH,GCxDZ,SAASuB,EAAoBC,OAC7BA,IAAYA,EAAQC,cAAkB,OAEvCC,EAAOF,EAAQC,QAAQE,iBAGd,SAATD,QAA0B,GAE1BF,EAAQI,KACVF,cAAYF,EAAQI,SAGhBC,EAAmBL,EAAQM,aAAa,SAC1CD,GACFA,EAAiBE,MAAM,OAAOC,QAAQ,SAAAC,GACpCP,cAAYO,MAIf,MAAO,OAAQ,QAAS,QAAQD,QAAQ,SAAAE,OACnCC,EAAOX,EAAQM,aAAaI,GAC5BC,IACFT,cAAYQ,eAAaC,eAIvBC,EAmFR,SAAqBZ,WAEXa,EAAQb,EAAQc,WAAWC,WAC3BH,EAAW,UAEjBpB,MAAMP,UAAUuB,QAAQrB,KAAK0B,EAAO,SAAAG,GAC9BA,EAAKf,SAAWe,EAAKf,UAAYD,EAAQC,SAC3CW,EAAStB,KAAK0B,KAIXJ,EACP,MAAMK,SACC,IAhGQC,CAAYlB,UACP,EAAlBY,EAASvB,SACXa,wBAAsBV,MAAMP,UAAUkC,QAAQhC,KAAKyB,EAAUZ,GAAW,QAGnEE,EAgBF,SAASkB,EAAoBpB,OAC9BqB,EAAOrB,EAAQsB,aAAetB,EAAQuB,WAAa,UAClDF,GAA0B,WAAjBrB,EAAQwB,MAAsC,WAAjBxB,EAAQwB,OAAsBH,EAAOrB,EAAQyB,OA6E1F,SAAkBC,EAAQrC,GACpBqC,EAAOrC,OAASA,IAClBqC,EAASA,EAAOC,OAAO,EAAGtC,GAAU,cAE/BqC,EAhFAE,CAASP,EAAKQ,OAAQ,KAyB/B,SAASC,EAASC,UAC8B,IAAvCA,EAAK7C,WAAWiC,QAAQ,UAG1B,SAASa,EAASC,OAEjBC,EAAQD,EAAIC,MAAM,iEAAmE,SAEpF,CACLC,SAAUD,EAAM,GAChBE,KAAMF,EAAM,GACZG,SAAUH,EAAM,IAIb,SAASI,EAAiBL,OACzBM,EAASP,EAASC,GAClBO,EAAeR,EAASS,SAASC,YAGlCH,EAAOH,MAASG,EAAOJ,SAGxBI,EAAOJ,WAAaK,EAAaL,UAAYI,EAAOH,OAASI,EAAaJ,KACrEG,EAAOF,mBAINE,EAAOJ,uBAAcI,EAAOH,aAAOG,EAAOF,UARLE,EAAOF,SClGxD,ICgBMM,EAdAC,EACAC,EAQAC,EACAC,EACAC,EDbFC,GCYEF,EADAD,IARAD,EAAW,CACT3C,KAAM,iBACN+B,IAAK,mDACLiB,QAJFN,EAAU,QAKRO,SAAU,eAMZH,EAAe,EA2HJ,SAASI,OAEhBC,EAA8B,KADpCL,GAAgB,GAEVM,GAAgBD,EAChBE,EAAe,GACfC,EAAQ,GACRC,EAAO,CACXC,QAAS,GACTC,qBAAsB,GACtBC,oBAAqB,GACrBC,YAAa,GACbC,WAAY,EACZC,mBAAoB,CAClBC,KAAK,EACLC,SAAS,EACTC,YAAY,EACZC,SAAS,OAGO,WAAhBrF,EAAOsE,OACJ,IAAIvD,KAAKuD,EAAQK,EAAK5D,GAAKuD,EAAKvD,YAG9BuE,QACHD,EAAUE,OAAOF,WACjBA,EAAS,KACPG,EAAO9E,MAAMP,UAAUsF,MAAMpF,KAAKqF,WACtCF,EAAKG,QAAQ,iBACbN,EAAQC,IAAIM,MAAMP,EAASG,aAItBK,OACHC,EAAO,gBACFR,EAAIM,MAAMG,KAAML,oBAIlBI,EAAOE,EAAKC,OACftD,EAAQgC,EAAKqB,eACHE,IAAVvD,IAAuBA,EAAQgC,EAAKqB,EAAI3E,gBAC9B,UAAVsB,IAAqBA,GAAQ,QACnBuD,IAAVvD,EAA8BA,EAC3BsD,WAGAE,WACH3B,GACGsB,EAAO,WAAW,YAQlBb,EAAmBvC,UACM,IAA5BiC,EAAKM,qBACLvC,GAAiD,IAAlCiC,EAAKM,mBAAmBvC,IACR,IAA5BiC,EAAKM,6BAOLmB,EAAQC,EAAQC,WAEjBC,WAuDcC,OACdC,EAAO,UACTD,EAAIE,YAAaD,EAAI,gBAAsBD,EAAIE,WAC/CF,EAAIG,WAAYF,EAAI,aAAmBD,EAAIG,UACpB,iBAAhBH,EAAII,QACbH,EAAI,YAAkBD,EAAII,QACM,WAAvB5G,EAAOwG,EAAII,WACpBH,EAAI,qBAjNYI,MACE,WAAlB7G,EAAO6G,QAIPD,EAAU,OACT,IAAI7F,KAAK8F,EACZD,EAAQpG,KAAKO,EAAI,IAAM8F,EAAO9F,WAGzB6F,EAAQE,KAAK,MAuMMC,CAAaP,EAAII,UAGlC,UACO7C,cACG,SACFkB,UACFuB,EAAIzB,mBAEN,OACEyB,EAAIpF,aACFoF,EAAIQ,kBACFR,EAAIS,gBACJT,EAAIU,sBACFV,EAAIW,qBAEV,KACFX,EAAIrD,cACEqD,EAAIY,iBACPZ,EAAIa,eACHb,EAAI5B,iBACH6B,SACFD,EAAIc,eAEN,cACQd,EAAIe,6BACAf,EAAIgB,qBACZhB,EAAIiB,WAzFJC,CAAapB,GACvBqB,EAAI,IAAIC,eACZD,EAAEE,KAAK,OAPF,QAAW/B,EAAO,OAAO,GAAS,IAAQ,IAAM,MAAQA,EAAO,OAAQ,sBAOjD,iBAAkBA,EAAO,SAAS,IAE7D6B,EAAEG,iBAAiB,YAAazB,GAChCsB,EAAEG,iBAAiB,eAAgB,oBACnCH,EAAEG,iBAAiB,SAAU,+BAE7BH,EAAEI,KAAKC,KAAKC,UAAUxI,EAAS8G,EAAST,EAAO,YAAa,MAC5D6B,EAAEO,OAAS,eACLC,EAAWzH,MAAMP,UAAUsF,MAAMpF,KAAKsE,EAAKG,wBAC3CwB,EAAO8B,aAAeD,EAASxC,QAAQW,EAAO8B,aAEjC,MAAbT,EAAEU,cACJC,EAAcH,EAAU,IAAII,mCAA4BZ,EAAEU,SAAW/B,QACrET,yCAAsC8B,EAAEU,oBAAWV,EAAEa,YAAcb,EAAGrB,GAGxEgC,EAAcH,OAAUjC,EAAWuC,EAAMnC,EAAQ,CAC/ChF,GAAI0G,KAAKU,MAAMf,EAAEgB,UAAUrH,MAE7BuE,EAAM,oBAAqBU,IAE7B,MAAMpE,GACNmG,EAAc3D,EAAKG,oBAAqB3C,EAAGmE,GAC3ChB,EAAI,gEAAiEnD,EAAGmE,aAInEyB,EAAKzB,MACZzC,EAAa,KAETiC,EAAO,YAAY,UACrBD,EAAM,8CAA+CS,IAC9C,MA+tBLsC,EA5tBAvC,EAASP,EAAO,SAAUA,EAAO,mBAChCO,GA2tBDuC,EAAY9C,EAAO,eACHnB,EAAKK,YAAc4D,GAttBrC/C,EAAM,uCAAwCS,IACvC,IAgtBF3B,EAAKK,aA3sBZoB,EAAQC,EAAQC,IAET,IAbLhB,EAAI,gEACG,YAsDFuD,EAAOrC,EAAKsC,MACPtC,EAAPA,GAAa,GAE0B,mBAAxCtG,OAAOC,UAAUC,SAASC,KAAKmG,KAEjCA,EAAMiC,EAAMjC,EAAK,CAACpF,KADVoF,EACkBpF,KAAM4F,QADxBR,EACmCQ,QAASC,MAAO8B,EADnDvC,MAIW,WAAfxG,EAAOwG,GAAmB,KAC1BwC,EAAIC,OAAOzC,GACfA,EAAM,CAACQ,QAASgC,MAGdE,EAAa1C,UAER,KACE3C,GAAcG,GAEvB+D,EAAKlE,YAnMYnE,OAChB,IAAIqB,KAAKrB,KACRQ,OAAOC,UAAUF,eAAeI,KAAKX,EAAKqB,UACrC,SAGJ,EAgMDoI,CAAc3C,UAAe,MAE7BU,EACA4B,IACFtC,EAAIS,MAAQ6B,EAAU7B,MACtBC,EAAY4B,EAAU5B,WAGxBV,EAAMiC,EAAMjC,EAAK,CACfpF,KAAMoF,EAAIpF,MAAQ,QAClBwD,QAAS6D,EAAM9D,EAAKC,QAAS4B,EAAI5B,SACjCzB,IAAKqD,EAAIrD,KAAOQ,SAASC,IACzB2D,YAAaf,EAAIe,aAAef,EAAI4C,cAAgBtD,EAAO,cAAeA,EAAO,eAAgBP,OAAO8D,SAAShG,SAAW,KAAOkC,OAAO8D,SAAS/F,OACnJkE,YAAahB,EAAIgB,aAAe1B,EAAO,eACvCsB,UAAWZ,EAAIY,WAAatB,EAAO,aACnCuB,OAAQb,EAAIa,QAAUvB,EAAO,UAC7B2B,SAAUjB,EAAIiB,UAAY3B,EAAO,YACjCY,UAAWF,EAAIE,WAAa4C,UAAU5C,UACtCC,SAAUH,EAAIG,UAAYhD,SAASgD,WAGrChC,EAAK4E,cAAc,qBAAsB,CACvCC,SAAU,SACVC,SAAU,CACRzC,QAASR,EAAIQ,QACb5F,KAAMoF,EAAIpF,KACV6F,MAAOT,EAAIS,SAIfT,EAAIzB,YAAcJ,EAAKI,YAAYU,YAzSpBe,EAAKkD,EA2ShBC,EAAwBnD,EAAIS,aAC5BqB,EAAc3D,EAAKE,qBAAsB2B,KACzCA,EAAIS,OAAS0C,IAEfzC,OAAYhB,GA/SCM,EAkTDA,EAlTMkD,EAkTD5D,EAAO,oBAjTvBpF,MAAMC,QAAQ+I,KACZA,EAASE,KAAK,SAACC,UAAMA,EAAE9J,KAAKyG,EAAIQ,cAkTrCR,EAAIU,UAAYA,EAEhBrD,EAAa2C,EAETxC,GACF6B,EAAM,mBAAoBW,GAC1BjB,OAAOuE,WAAW,WACZZ,EAAa1C,IACfuB,EAAKvB,OAITX,EAAM,iBAAkBW,GACxB9B,EAAMlE,KAAKgG,IAGNA,QAGLuD,GAAc,KAEbxE,OAAOyE,OAAQD,GAAc,GAE9BxE,OAAO0E,eAEmC,IAArC,IAAI1E,OAAO0E,WAAW,IAAKC,QAC9BH,GAAc,GAEhB,MAAMI,aAKDC,EAAKC,EAAI/F,GACHA,EAARA,GAAe,aAEA,mBAAP+F,EAA4BA,GA1QjB3K,EA2QE2K,EA1QO,mBAAxBnK,OAAOoK,cACXpK,OAAOoK,aAAa5K,IA0QlB2K,EAAGE,QACNF,EAAGE,MAAQ,eACLC,EAAUrE,SAGT4D,IAAgBS,GAAWlG,EAAKmG,QAAYnG,EAAKmG,QAAUD,UAoBvDH,EAAGzE,MAAMG,KAAML,sBAlBb2E,EAAGzE,MAAMG,KAAML,WACtB,MAAOc,OACHsC,EAAY,CAAE7B,MAAO8B,EAAWvC,UACpC7B,EAAK4E,cACHjF,EAAK8C,oBAAe9C,EAAK8C,uBAAcZ,EAAIpF,MAASoF,EAAIpF,KACxD,CACEoI,SAAU,QACVC,SAAU,CACRzC,QAASR,EAAIQ,QACb5F,KAAMoF,EAAIpF,KACV6F,MAAO6B,EAAU7B,SAIvB4B,EAAOrC,EAAKsC,GACNtC,KAOd6D,EAAGE,MAAMA,MAAQF,EAAGE,MACbF,EAAGE,OA/B6BF,GAgCvC,MAAMF,UACCE,MA5Se3K,EAiT1BiF,EAAKkE,OAAS,SAASrC,EAAKpF,EAAMsJ,UACpBlE,EAAPA,GAAa,GAE0B,mBAAxCtG,OAAOC,UAAUC,SAASC,KAAKmG,KAEjCA,EAAMiC,EAAMjC,EAAK,CAACpF,KADVoF,EACkBpF,KAAM4F,QADxBR,EACmCQ,QAASC,MAAO8B,EADnDvC,MAIW,WAAfxG,EAAOwG,KAEXA,EAAM,CAACQ,QADCiC,OAAOzC,KAIbpF,GAA0B,WAAhBpB,EAAOoB,KAEnBA,EAAO,CAACA,KADA6H,OAAO7H,KAIbA,IACFoF,EAAMmE,EAASnE,EAAKpF,IAED,WAAjBpB,EAAO0K,KACTlE,EAAMmE,EAASnE,EAAKkE,IAGf7B,EAAOrC,WAhYUA,OACtBS,KAGAT,IAAQS,EAAQ8B,EAAWvC,UACtB,CAACS,MAAOA,EAAOC,eAAWhB,aAI3B,IAAIqC,MAAM,IAChB,MAAMpG,MACF8E,EAAQ8B,EAAW5G,SACd,CAAC8E,MAAOA,EAAOC,UAAW,SAIrCD,EAAQ,CAAC,wBACL2D,EAAOlF,UAAUmF,OACdD,GAAQ3D,EAAM1G,OAhBF,IAgByB,CACtC,gCAAgCR,KAAK6K,EAAKxK,YAC5C6G,EAAMzG,KAAKsK,OAAOC,IAAM,eAExB9D,EAAMzG,KAAK,mBAGXoK,EAAOA,EAAKI,OACZ,MAAO7I,gBAKJ,CAAC8E,MAAOA,EAAMH,KAAK,MAAOI,UAAW,QAiWvB+D,CAAmBzE,KAGxC7B,EAAKyF,KAAO,SAASnH,UACZmH,EAAKnH,EAAM,CAAEwH,OAAO,KAG7B9F,EAAKuG,WAAa,SAAStG,SACF,WAAnB5E,EAAO4E,KACTD,EAAKC,QAAU6D,EAAM9D,EAAKC,QAASA,IAE9BD,GAGTA,EAAKwG,aAAe,SAASvG,SACJ,WAAnB5E,EAAO4E,GACTD,EAAKC,QAAU6D,EAAM,GAAI7D,GAEzBD,EAAKC,QAAU,GAEVD,GAGTA,EAAKyG,UAAY,SAAS9G,OACnB,IAAIvD,KAAKuD,EACZK,EAAK5D,GAAKuD,EAAKvD,UAEbwD,IAAcN,IAChBA,GAAY,EACZoH,EAAa3J,QAAQ,SAAC4J,UAAgBA,OAEjC3G,GAGTA,EAAK4G,aAAe,SAASC,UAC3B7G,EAAKE,qBAAqBrE,KAAKgL,GACxB7G,GAGTA,EAAKyD,YAAc,SAASoD,UAC1B7G,EAAKG,oBAAoBtE,KAAKgL,GACvB7G,OAGLtC,EAAU,GAAGA,SAAW,SAASoJ,OAAa,IAAInL,EAAI,EAAGoL,EAAI3F,KAAKxF,OAAQD,EAAIoL,EAAGpL,OAAWA,KAAKyF,MAAQA,KAAKzF,KAAOmL,EAAM,OAAOnL,SAAa,GACnJqE,EAAKgH,MAAQ,eAIN,IAAI5K,KAHT4D,EAAKC,QAAU,GACfD,EAAKE,qBAAuB,GAC5BF,EAAKI,YAAc,GACLJ,GAC0B,GAAlCtC,EAAQhC,KAAKoE,EAAc1D,KAC7B4D,EAAK5D,QAAKmF,UAGdvB,EAAKiH,iBACEjH,GAGTA,EAAKiH,eAAiB,kBACZjH,EAAKK,WAAW,GAG1BL,EAAKkH,WAAa,kBACT/H,GAGTa,EAAK4E,cAAgB,SAASvC,EAAS1C,MAChCW,SAICwE,WAxfS/J,MACG,WAAhBM,EAAON,SAA4B,OACnCoM,EAAU,OACT,IAAI/K,KAAKrB,EAAOoM,EAAQ/K,GAAKrB,EAAIqB,UAC/B+K,EAofYC,EAFjBzH,EAAOA,GAAQ,IAEiBmF,UAC1BD,EAAWlF,EAAKkF,UAAY,SAC5BwC,GAAY,IAAIC,MAAOC,cAE7BvH,EAAKI,YAAYvE,KAAK,CACpBgJ,SAAUA,EACVxC,QAASA,EACTyC,SAAUA,EACVuC,UAAWA,QAGPG,EAAQrG,EAAO,iBAAkB,WACnCnB,EAAKI,YAAYxE,OAAS4L,IAC5BxH,EAAKI,YAAcJ,EAAKI,YAAYU,MAAMd,EAAKI,YAAYxE,OAAS4L,IAG/DxH,QAGH0G,EAAe,YAIZe,EAAWvF,EAAQzF,EAAMiL,OAC5B7H,GACCqC,GAAWzF,GAASiL,GAAiBjL,KAAQyF,WAC9CyF,EAAWzF,EAAOzF,GACfkL,GAAYA,EAASC,eAC1BD,EAAWA,EAASC,cAEtB1F,EAAOzF,GAAQiL,EAAYC,GAC3BzF,EAAOzF,GAAMmL,cAAgBD,YAyPpBE,EAAgBC,UAChB,SAASH,UAEP,SAASrJ,EAAMyJ,MACA,mBAATzJ,SAOFqJ,EAASrJ,EAAMyJ,OANlBlH,EAAO9E,MAAMP,UAAUsF,MAAMpF,KAAKqF,UAAW,UACjDzC,EAAOmH,EAAKnH,EAAMwJ,GACXH,EAAS,WACdrJ,EAAK2C,MAAM,KAAMJ,IAChBkH,SA8JR,IAAI3L,KA5ZTsK,EAAa7K,KAAK,WACXyE,EAAmB,QAExBM,OAAOoH,iBAAiB,QAAS,SAACC,OAC5B5F,EAAS6F,EAAUtK,MAErByE,EAAU/F,EAAoB2L,EAAME,QACpCD,EFxhBH,SAASE,EAAwB7L,OAChCE,EAAOH,EAAoBC,MAE7BA,EAAQc,YAAcd,EAAQc,WAAWb,QAAS,KAC9C6L,EAAaD,EAAwB7L,EAAQc,eAC3B,EAApBgL,EAAWzM,uBACHyM,gBAAgB5L,UAIvBA,EE8gBY2L,CAAwBH,EAAME,QACzCvK,EAAOD,EAAoBsK,EAAME,QACjC,MAAM3K,GACN6E,EAAU,WAEVzE,EADAsK,EAAW,YAKU,IAAnB7F,EAAQzG,QAEZoE,EAAK4E,cAAcvC,EAAS,CAC1BwC,SAAU,WACVC,SAAU,CACRoD,SAAAA,EACAtK,KAAAA,EACAqK,MAAAA,OAGH,KAILvB,EAAa7K,KAAK,WACXyE,EAAmB,aAGxBmH,EAAWxE,eAAezH,UAAW,OAAQ,SAASmM,UAC7C,eAECnJ,EAAMuC,UAAU,GAChBuH,EAAiC,iBAAjBvH,UAAU,GAAkBA,UAAU,GAAGwH,cAAgBxH,UAAU,GACnFsB,YAAaiG,cAAUzJ,EAAiBL,SAEzCgK,SAAW,CACdzK,KAAM,MACNuK,OAAAA,EACA9J,IAAAA,EACA6D,QAAAA,GAGsB,mBAAbsF,GACTA,EAAS1G,MAbCG,KAaUL,cAM1B0G,EAAWxE,eAAezH,UAAW,OAAQ,SAASmM,UAC7C,eACCc,EAAMrH,cAEHsH,QAEDrG,EADiB,IAAnBoG,EAAIE,aAGFF,EAAID,WACNC,EAAID,SAASI,YAAcH,EAAI/E,OAC/BrB,EAAUoG,EAAID,SAASnG,eAChBoG,EAAID,SAASnG,SAGtBrC,EAAK4E,cAAcvC,GAAW,iBAAkB,CAC9CwC,SAAU,UACVC,SAAU2D,EAAID,YAKhB,uBAAwBC,GAAyC,mBAA3BA,EAAII,mBAC5CpB,EAAWgB,EAAK,qBAAsB,SAASd,UACtC,WACLe,IAEwB,mBAAbf,GACTA,EAAS1G,MAAMG,KAAML,cAK3B0H,EAAII,mBAAqBH,EAGH,mBAAbf,GACTA,EAAS1G,MAAMwH,EAAK1H,iBAO5B2F,EAAa7K,KAAK,WACXyE,EAAmB,cFjmBvB,eACAM,OAAOkI,aAAgB,KACxBzK,EAASuC,OAAOkI,cAAiB,UAK7BC,EAAU/J,SAASgK,cAAc,UACvCD,EAAQE,MAAMC,QAAU,OACxBlK,SAASmK,KAAKC,YAAYL,OACpBM,EAASN,EAAQO,cAAcR,OAASzK,EAAS0K,EAAQO,cAAcR,cAC7E9J,SAASmK,KAAKI,YAAYR,GACnBM,EACP,MAAMxH,GACFnB,SAAWA,QAAQ8I,MACrB9I,QAAQ8I,KAAK,6CAA+C3H,UAIzD,EEglBE4H,IAKLhC,EAAW7G,OAAQ,QAAS,SAAS+G,UAC5B,eAIDnJ,EAHEkL,EAAQ3I,UAAU,GAEpBuH,EAAS,MAGQ,iBAAVoB,EACTlL,EAAMkL,EACG,YAAa9I,QAAU8I,aAAiBC,SACjDnL,EAAMkL,EAAMlL,IACRkL,EAAMpB,SACRA,EAASoB,EAAMpB,SAGjB9J,EAAM8F,OAAOoF,GAGX3I,UAAU,IAAMA,UAAU,GAAGuH,SAC/BA,EAASvH,UAAU,GAAGuH,QAGF,iBAAXA,IACTA,EAASA,EAAOC,mBAGZlG,YAAaiG,cAAUzJ,EAAiBL,IACxCsG,EAAW,CACf/G,KAAM,QACNuK,OAAAA,EACA9J,IAAAA,UAGKmJ,EACJ1G,MAAMG,KAAML,WACZ6I,KAAK,SAAS5F,UACbc,EAAS8D,YAAc5E,EAASN,OAChC1D,EAAK4E,cAAcvC,EAAS,CAC1BwC,SAAU,UACVC,SAAAA,IAEKd,IAER6F,MAAM,SAASC,SACd9J,EAAK4E,cAAc,cAAe,CAChCC,SAAU,QACVC,SAAAA,IAGIgF,UAOhBpD,EAAa7K,KAAK,cACXyE,EAAmB,mBAGpByJ,EAAWnJ,OAAO8D,SAASsF,KAc/BvC,EAAW7G,OAAQ,aAAc,SAAS+G,UACjC,cACLsC,EAAgBF,EAAUnJ,OAAO8D,SAASsF,MACtCrC,SACKA,EAAS1G,MAAMG,KAAML,cAgBlC0G,EAAW7G,OAAOsJ,QAAS,YAAaC,GACxC1C,EAAW7G,OAAOsJ,QAAS,eAAgBC,YAjClCF,EAAgBG,EAAMC,GAC7BN,EAAWM,EACXrK,EAAK4E,cAAc,eAAgB,CACjCC,SAAU,aACVC,SAAU,CACRsF,KAAAA,EACAC,GAAAA,cAiBGF,EAAexC,UACf,eACCnJ,EAAyB,EAAnBuC,UAAUnF,OAAamF,UAAU,QAAKQ,SAC9C/C,GACFyL,EAAgBF,EAAUzF,OAAO9F,IAE5BmJ,EAAS1G,MAAMG,KAAML,eAQlC2F,EAAa7K,KAAK,WACXyE,EAAmB,aAcvB,QAAS,OAAQ,OAAQ,QAAS,OAAOvD,QAAQ,SAAAuN,GAChD7C,EAAW7G,OAAOF,QAAS4J,EAAO,SAAS3C,UAClC,eAdW5M,EAeV8F,EAAO9E,MAAMP,UAAUsF,MAAMpF,KAAKqF,WAClCsB,GAhBUtH,EAgBa8F,EAf5B9E,MAAMC,QAAQjB,GAEZA,EAAIkB,IAAI,SAAA+B,cAEJsG,OAAOtG,GACd,MAAOR,SACA,eAER2E,KAAK,KAR0B,IAgBxBxC,EAAO,CACXkF,SAAU,MACVC,SAAU,CACRwF,MAAOA,EACPvJ,UAAWjG,EAAS+F,EAAM,KAI9Bb,EAAK4E,cAAcvC,EAAS1C,GAEJ,mBAAbgI,GACT4C,SAAS/O,UAAUyF,MAAMvF,KAAKiM,EAAU/G,OAAOF,QAASK,kBAyBhE0G,EAAW7G,OAAQ,aAAciH,EAAgB,CAAEpF,UAAW,gBAC9DgF,EAAW7G,OAAQ,cAAeiH,EAAgB,CAAEpF,UAAW,6ZAM2U+H,QAAQ,OAAQ,SAAUC,OAChajP,EAAYoF,OAAO6J,IAAS7J,OAAO6J,GAAMjP,UACzCA,GAAaA,EAAUF,gBAAkBE,EAAUF,eAAe,sBACpEmM,EAAWjM,EAAW,mBAAoB,SAASmM,OAC3CG,EAAW,CAACrF,oBAAcgI,yCAGzB,SAAS1M,EAAM2M,EAAUC,EAAYC,OAEpCF,GAAoC,MAAxBA,EAASG,cACvBH,EAASG,YAAcpF,EAAKiF,EAASG,YAAa/C,IAEpD,MAAMtK,GAENmD,EAAInD,UAECmK,EAASjM,KAAK0F,KAAMrD,EAAM0H,EAAKiF,EAAU5C,GAAW6C,EAAYC,MAG3EnD,EAAWjM,EAAW,sBAAuB,SAASmM,UAC7C,SAAS5J,EAAM2M,EAAUC,EAAYC,UAC1CjD,EAASjM,KAAK0F,KAAMrD,EAAM2M,EAAUC,EAAYC,GACzCjD,EAASjM,KAAK0F,KAAMrD,EAAM0H,EAAKiF,GAAWC,EAAYC,SAOrEnD,EAAW7G,OAAQ,UAAW,SAAS+G,UA8C9B,SAASmD,EAAKtM,EAAKuM,EAAMC,EAAKnJ,mBA7CpBiJ,EAAKtM,EAAKuM,EAAMC,EAAKnJ,MACpCX,EAAM,kCAAmCH,YAGrC7B,GAECsC,OAEQ,IAATuJ,GAAc,kBAAkB3P,KAAK0P,GAEvCnK,EAAI,iFAAkFI,oBAOpFoD,EAFE8G,EAAiB,CAACH,EAAK,eAAgBtM,GAAO,UAAW,IAAKuM,GAAQ,EAAG,IAAKC,GAAO,EAAG,KAAK7I,KAAK,IAGpGN,GACFsC,EAAY,CAAE7B,MAAO8B,EAAWvC,KACjBS,QAAS6B,EAAY,CAAC7B,MAAO2I,IAG5CpJ,EAAM,CACJpF,KAAM,iBACN4F,QAASyI,EACTxI,MAAO2I,GAIXjL,EAAK4E,cACW,mBAAb/C,EAAIpF,MAA8BoF,EAAIpF,+BAA8CoF,EAAIpF,MAA1C,iBAC/C,CACEoI,SAAU,QACVC,SAAU,CACRzC,QAASR,EAAIQ,QACb5F,KAAMoF,EAAIpF,KACV6F,MAAO6B,EAAYA,EAAU7B,MAAQT,EAAIS,SAK/C4B,EAAOrC,EAAKsC,IAIZ0B,CAAQiF,EAAKtM,EAAKuM,EAAMC,EAAKnJ,KACL,mBAAb8F,IAA2BxG,EAAO,sBAAsB,KAC1DwG,EAAS1G,MAAMG,KAAML,cAOlC0G,EAAW7G,OAAQ,uBAAwB,SAAS+G,YAEzCuD,EAAqBC,MAC5BjK,EAAM,+CAAgDH,YAGlD7B,IAjuBFW,GACGsB,EAAO,wBAAwB,QAouB9BiK,EAAWD,EAAXC,UAEFA,aAAkBxH,MAAO,KAEvByH,EAAWD,EAAOC,UAAY,UAC9BC,EAAaF,EAAOE,YAAc,EAClCC,YAAmBH,EAAO/I,+BAAsBgJ,cAAYC,OAC5DhJ,EAAQ8B,EAAWgH,IAAWG,EAC9B1J,EAAM,CACRpF,KAAM2O,EAAO3O,KACb4F,oDAA8C+I,GAC9C9I,MAAAA,UAEFtC,EAAK4E,qDAC6B/C,EAAIpF,MACpC,CACEoI,SAAU,QACVC,SAAUjD,SAGdqC,EAAOrC,OAILQ,EAA4B,iBAAX+I,EAAsBA,EAAS/H,KAAKC,UAAU8H,GACnElH,EAAO,CACLzH,KAAM,8BACN4F,oDAA8CA,aAI3C,SAAS8I,GACdD,EAAqBC,GACG,mBAAbxD,GACTA,EAAS1G,MAAMG,KAAML,cAebf,EACZF,EAAajE,KAAKO,MAIpB8E,EAAM,+BAAiC/B,GAKnC,8BAA8B/D,KAAK4D,SAAS2J,YAC9CtJ,GAAS,EACT6B,EAAM,kCACD,CACLA,EAAM,gCACFsK,EAAW,eAGT7J,MAFJtC,GAAS,EACT6B,EAAM,8BAECS,EAAS5B,EAAM0L,OACpBrI,EAAKzB,IAGL3C,SAASgJ,iBACXhJ,SAASgJ,iBAAiB,mBAAoBwD,GAAU,GAExD5K,OAAO8K,YAAY,SAAUF,UAI1BxL,aA79BA8D,EAAM6H,EAAMC,OACfC,EAAO,OACN,IAAIzP,KAAKuP,EAAQE,EAAKzP,GAAKuP,EAAKvP,OAChC,IAAIA,KAAKwP,EAAQC,EAAKzP,GAAKwP,EAAKxP,UAC9ByP,WAWA7F,EAAS8F,EAAMC,OAClB5P,EAAM2H,EAAMgI,EAAMC,UAElBD,EAAK7L,SAAW8L,EAAK9L,UACvB9D,EAAI8D,QAAU6D,EAAMgI,EAAK7L,QAAS8L,EAAK9L,UAGlC9D,WAGAoI,EAAa1C,WACf3C,IACDA,EAAWzC,OAASoF,EAAIpF,OACxByC,EAAWmD,UAAYR,EAAIQ,SAC3BnD,EAAWoD,QAAUT,EAAIS,iBAsBtB8B,EAAWvC,UAGXA,EAAImK,YAAcnK,EAAIS,YAASf,WAqC/BoC,EAAcH,EAAU3B,EAAKmC,OACvBrI,EAAGsQ,MACXtQ,EAAI,EAAGsQ,EAAMzI,EAAS5H,OAAQD,EAAIsQ,EAAKtQ,QAEX,KAD/BkL,EAAUrD,EAAS7H,IACPkG,EAAKmC,UACR,SAGJ,EDrHX,IAAIpE,EAAYJ,WAEhBI,EAAUJ,QAAUA"}