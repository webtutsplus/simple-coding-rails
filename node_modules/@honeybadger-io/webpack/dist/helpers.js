"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handleError = handleError;
exports.validateOptions = validateOptions;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _verror = _interopRequireDefault(require("verror"));

var _constants = require("./constants");

function handleError(err) {
  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'HoneybadgerSourceMapPlugin';

  if (!err) {
    return [];
  }

  var errors = [].concat(err);
  return errors.map(function (e) {
    return new _verror["default"](e, prefix);
  });
}

function validateOptions(ref) {
  var errors = _constants.REQUIRED_FIELDS.reduce(function (result, field) {
    if (ref && ref[field]) {
      return result;
    }

    return [].concat((0, _toConsumableArray2["default"])(result), [new Error("required field, '".concat(field, "', is missing."))]);
  }, []);

  return errors.length ? errors : null;
}