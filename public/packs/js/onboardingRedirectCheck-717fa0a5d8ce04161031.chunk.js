(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["onboardingRedirectCheck"],{

/***/ "./app/javascript/packs/onboardingRedirectCheck.jsx":
/*!**********************************************************!*\
  !*** ./app/javascript/packs/onboardingRedirectCheck.jsx ***!
  \**********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _chat_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chat/util */ \"./app/javascript/chat/util.js\");\n/* harmony import */ var _utilities_connect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/connect */ \"./app/javascript/utilities/connect/index.js\");\n\n\nHTMLDocument.prototype.ready = new Promise(function (resolve) {\n  if (document.readyState !== 'loading') {\n    return resolve();\n  }\n\n  document.addEventListener('DOMContentLoaded', function () {\n    return resolve();\n  });\n  return null;\n});\n\nfunction redirectableLocation() {\n  return window.location.pathname !== '/onboarding' && window.location.pathname !== '/signout_confirm' && window.location.pathname !== '/privacy';\n}\n\nfunction onboardingSkippable(currentUser) {\n  return currentUser.saw_onboarding && currentUser.checked_code_of_conduct && currentUser.checked_terms_and_conditions;\n}\n\ndocument.ready.then(Object(_chat_util__WEBPACK_IMPORTED_MODULE_0__[\"getUserDataAndCsrfToken\"])().then(function (_ref) {\n  var currentUser = _ref.currentUser,\n      csrfToken = _ref.csrfToken;\n  window.currentUser = currentUser;\n  window.csrfToken = csrfToken;\n  Object(_utilities_connect__WEBPACK_IMPORTED_MODULE_1__[\"getUnopenedChannels\"])();\n\n  if (redirectableLocation() && !onboardingSkippable(currentUser)) {\n    window.location = \"\".concat(window.location.origin, \"/onboarding?referrer=\").concat(window.location);\n  }\n})[\"catch\"](function (error) {\n  // eslint-disable-next-line no-console\n  console.error('Error getting user and CSRF Token', error);\n}));\nwindow.InstantClick.on('change', function () {\n  Object(_chat_util__WEBPACK_IMPORTED_MODULE_0__[\"getUserDataAndCsrfToken\"])().then(function (_ref2) {\n    var currentUser = _ref2.currentUser;\n\n    if (redirectableLocation() && localStorage.getItem('shouldRedirectToOnboarding') === null && !onboardingSkippable(currentUser)) {\n      window.location = \"\".concat(window.location.origin, \"/onboarding?referrer=\").concat(window.location);\n    }\n  })[\"catch\"](function (error) {\n    // eslint-disable-next-line no-console\n    console.error('Error getting user and CSRF Token', error);\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9wYWNrcy9vbmJvYXJkaW5nUmVkaXJlY3RDaGVjay5qc3g/NTI3YiJdLCJuYW1lcyI6WyJIVE1MRG9jdW1lbnQiLCJwcm90b3R5cGUiLCJyZWFkeSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlZGlyZWN0YWJsZUxvY2F0aW9uIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsIm9uYm9hcmRpbmdTa2lwcGFibGUiLCJjdXJyZW50VXNlciIsInNhd19vbmJvYXJkaW5nIiwiY2hlY2tlZF9jb2RlX29mX2NvbmR1Y3QiLCJjaGVja2VkX3Rlcm1zX2FuZF9jb25kaXRpb25zIiwidGhlbiIsImdldFVzZXJEYXRhQW5kQ3NyZlRva2VuIiwiY3NyZlRva2VuIiwiZ2V0VW5vcGVuZWRDaGFubmVscyIsIm9yaWdpbiIsImVycm9yIiwiY29uc29sZSIsIkluc3RhbnRDbGljayIsIm9uIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBQSxZQUFZLENBQUNDLFNBQWIsQ0FBdUJDLEtBQXZCLEdBQStCLElBQUlDLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQWE7QUFDdEQsTUFBSUMsUUFBUSxDQUFDQyxVQUFULEtBQXdCLFNBQTVCLEVBQXVDO0FBQ3JDLFdBQU9GLE9BQU8sRUFBZDtBQUNEOztBQUNEQyxVQUFRLENBQUNFLGdCQUFULENBQTBCLGtCQUExQixFQUE4QztBQUFBLFdBQU1ILE9BQU8sRUFBYjtBQUFBLEdBQTlDO0FBQ0EsU0FBTyxJQUFQO0FBQ0QsQ0FOOEIsQ0FBL0I7O0FBUUEsU0FBU0ksb0JBQVQsR0FBZ0M7QUFDOUIsU0FDRUMsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxRQUFoQixLQUE2QixhQUE3QixJQUNBRixNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLFFBQWhCLEtBQTZCLGtCQUQ3QixJQUVBRixNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLFFBQWhCLEtBQTZCLFVBSC9CO0FBS0Q7O0FBRUQsU0FBU0MsbUJBQVQsQ0FBNkJDLFdBQTdCLEVBQTBDO0FBQ3hDLFNBQ0VBLFdBQVcsQ0FBQ0MsY0FBWixJQUNBRCxXQUFXLENBQUNFLHVCQURaLElBRUFGLFdBQVcsQ0FBQ0csNEJBSGQ7QUFLRDs7QUFFRFgsUUFBUSxDQUFDSCxLQUFULENBQWVlLElBQWYsQ0FDRUMsMEVBQXVCLEdBQ3BCRCxJQURILENBQ1EsZ0JBQWdDO0FBQUEsTUFBN0JKLFdBQTZCLFFBQTdCQSxXQUE2QjtBQUFBLE1BQWhCTSxTQUFnQixRQUFoQkEsU0FBZ0I7QUFDcENWLFFBQU0sQ0FBQ0ksV0FBUCxHQUFxQkEsV0FBckI7QUFDQUosUUFBTSxDQUFDVSxTQUFQLEdBQW1CQSxTQUFuQjtBQUNBQyxnRkFBbUI7O0FBRW5CLE1BQUlaLG9CQUFvQixNQUFNLENBQUNJLG1CQUFtQixDQUFDQyxXQUFELENBQWxELEVBQWlFO0FBQy9ESixVQUFNLENBQUNDLFFBQVAsYUFBcUJELE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQlcsTUFBckMsa0NBQW1FWixNQUFNLENBQUNDLFFBQTFFO0FBQ0Q7QUFDRixDQVRILFdBVVMsVUFBQ1ksS0FBRCxFQUFXO0FBQ2hCO0FBQ0FDLFNBQU8sQ0FBQ0QsS0FBUixDQUFjLG1DQUFkLEVBQW1EQSxLQUFuRDtBQUNELENBYkgsQ0FERjtBQWlCQWIsTUFBTSxDQUFDZSxZQUFQLENBQW9CQyxFQUFwQixDQUF1QixRQUF2QixFQUFpQyxZQUFNO0FBQ3JDUCw0RUFBdUIsR0FDcEJELElBREgsQ0FDUSxpQkFBcUI7QUFBQSxRQUFsQkosV0FBa0IsU0FBbEJBLFdBQWtCOztBQUN6QixRQUNFTCxvQkFBb0IsTUFDcEJrQixZQUFZLENBQUNDLE9BQWIsQ0FBcUIsNEJBQXJCLE1BQXVELElBRHZELElBRUEsQ0FBQ2YsbUJBQW1CLENBQUNDLFdBQUQsQ0FIdEIsRUFJRTtBQUNBSixZQUFNLENBQUNDLFFBQVAsYUFBcUJELE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQlcsTUFBckMsa0NBQW1FWixNQUFNLENBQUNDLFFBQTFFO0FBQ0Q7QUFDRixHQVRILFdBVVMsVUFBQ1ksS0FBRCxFQUFXO0FBQ2hCO0FBQ0FDLFdBQU8sQ0FBQ0QsS0FBUixDQUFjLG1DQUFkLEVBQW1EQSxLQUFuRDtBQUNELEdBYkg7QUFjRCxDQWZEIiwiZmlsZSI6Ii4vYXBwL2phdmFzY3JpcHQvcGFja3Mvb25ib2FyZGluZ1JlZGlyZWN0Q2hlY2suanN4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VXNlckRhdGFBbmRDc3JmVG9rZW4gfSBmcm9tICcuLi9jaGF0L3V0aWwnO1xuaW1wb3J0IHsgZ2V0VW5vcGVuZWRDaGFubmVscyB9IGZyb20gJy4uL3V0aWxpdGllcy9jb25uZWN0JztcblxuSFRNTERvY3VtZW50LnByb3RvdHlwZS5yZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHtcbiAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICB9XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiByZXNvbHZlKCkpO1xuICByZXR1cm4gbnVsbDtcbn0pO1xuXG5mdW5jdGlvbiByZWRpcmVjdGFibGVMb2NhdGlvbigpIHtcbiAgcmV0dXJuIChcbiAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICcvb25ib2FyZGluZycgJiZcbiAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICcvc2lnbm91dF9jb25maXJtJyAmJlxuICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy9wcml2YWN5J1xuICApO1xufVxuXG5mdW5jdGlvbiBvbmJvYXJkaW5nU2tpcHBhYmxlKGN1cnJlbnRVc2VyKSB7XG4gIHJldHVybiAoXG4gICAgY3VycmVudFVzZXIuc2F3X29uYm9hcmRpbmcgJiZcbiAgICBjdXJyZW50VXNlci5jaGVja2VkX2NvZGVfb2ZfY29uZHVjdCAmJlxuICAgIGN1cnJlbnRVc2VyLmNoZWNrZWRfdGVybXNfYW5kX2NvbmRpdGlvbnNcbiAgKTtcbn1cblxuZG9jdW1lbnQucmVhZHkudGhlbihcbiAgZ2V0VXNlckRhdGFBbmRDc3JmVG9rZW4oKVxuICAgIC50aGVuKCh7IGN1cnJlbnRVc2VyLCBjc3JmVG9rZW4gfSkgPT4ge1xuICAgICAgd2luZG93LmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG4gICAgICB3aW5kb3cuY3NyZlRva2VuID0gY3NyZlRva2VuO1xuICAgICAgZ2V0VW5vcGVuZWRDaGFubmVscygpO1xuXG4gICAgICBpZiAocmVkaXJlY3RhYmxlTG9jYXRpb24oKSAmJiAhb25ib2FyZGluZ1NraXBwYWJsZShjdXJyZW50VXNlcikpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vb25ib2FyZGluZz9yZWZlcnJlcj0ke3dpbmRvdy5sb2NhdGlvbn1gO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBhbmQgQ1NSRiBUb2tlbicsIGVycm9yKTtcbiAgICB9KSxcbik7XG5cbndpbmRvdy5JbnN0YW50Q2xpY2sub24oJ2NoYW5nZScsICgpID0+IHtcbiAgZ2V0VXNlckRhdGFBbmRDc3JmVG9rZW4oKVxuICAgIC50aGVuKCh7IGN1cnJlbnRVc2VyIH0pID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgcmVkaXJlY3RhYmxlTG9jYXRpb24oKSAmJlxuICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2hvdWxkUmVkaXJlY3RUb09uYm9hcmRpbmcnKSA9PT0gbnVsbCAmJlxuICAgICAgICAhb25ib2FyZGluZ1NraXBwYWJsZShjdXJyZW50VXNlcilcbiAgICAgICkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9vbmJvYXJkaW5nP3JlZmVycmVyPSR7d2luZG93LmxvY2F0aW9ufWA7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGFuZCBDU1JGIFRva2VuJywgZXJyb3IpO1xuICAgIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./app/javascript/packs/onboardingRedirectCheck.jsx\n");

/***/ }),

/***/ 13:
/*!********************************************************************************!*\
  !*** multi preact/devtools ./app/javascript/packs/onboardingRedirectCheck.jsx ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! preact/devtools */"./node_modules/preact/devtools/dist/devtools.module.js");
module.exports = __webpack_require__(/*! /Users/nmadhab/hobby/forem/app/javascript/packs/onboardingRedirectCheck.jsx */"./app/javascript/packs/onboardingRedirectCheck.jsx");


/***/ })

},[[13,"runtime~onboardingRedirectCheck",0,1,"vendors~Chat~Onboarding~articleForm~onboardingRedirectCheck","Chat~Onboarding~articleForm~onboardingRedirectCheck","Chat~Onboarding~onboardingRedirectCheck"]]]);