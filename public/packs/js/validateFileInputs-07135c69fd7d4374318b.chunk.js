(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["validateFileInputs"],{

/***/ "./app/javascript/packs/validateFileInputs.js":
/*!****************************************************!*\
  !*** ./app/javascript/packs/validateFileInputs.js ***!
  \****************************************************/
/*! exports provided: validateFileInputs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateFileInputs\", function() { return validateFileInputs; });\n/**\n * @file Manages logic to validate file uploads client-side. In general, the\n * validations work by looping over input form fields with a type of file and\n * checking the size and format of the files upload by the user.\n */\n\n/**\n * An object containing the top level MIME type as the key and the max file\n * size in MB for the value. To use a different value than these defaults,\n * simply add a data-max-file-mb attribute to the input form field with the\n * max file size in MB. If that attribute is found, it takes priority over these\n * defaults.\n *\n * @constant {Object.<string, number>}\n */\nvar MAX_FILE_SIZE_MB = Object.freeze({\n  image: 25,\n  video: 50\n});\n/**\n * Permitted file types using the top level MIME type (i.e. image for\n * image/png). To specify permitted file types, simply add a\n * data-permitted-file-types attribute to the input form field as an Array of\n * strings specifying the top level MIME types that are permitted.\n *\n * @constant {string[]}\n */\n\nvar PERMITTED_FILE_TYPES = ['image'];\n/**\n * The maximum length of the file name to prevent errors on the backend when a\n * file name is too long.\n *\n * @constant {number}\n */\n\nvar MAX_FILE_NAME_LENGTH = 250;\n/**\n * Removes any pre-existing error messages from the DOM related to file\n * validation.\n *\n * @param {HTMLElement} fileInput - An input form field with type of file\n */\n\nfunction removeErrorMessage(fileInput) {\n  var errorMessage = fileInput.parentNode.querySelector('div.file-upload-error');\n\n  if (errorMessage) {\n    errorMessage.remove();\n  }\n}\n/**\n * Adds error messages in the form of a div with red text.\n *\n * @param {HTMLElement} fileInput - An input form field with type of file\n * @param {string} msg - The error message to be displayed to the user\n *\n * @returns {HTMLElement} The error element that was added to the DOM\n */\n\n\nfunction addErrorMessage(fileInput, msg) {\n  var fileInputField = fileInput;\n  var error = document.createElement('div');\n  error.style.color = 'red';\n  error.innerHTML = msg;\n  error.classList.add('file-upload-error');\n  fileInputField.parentNode.append(error);\n}\n/**\n * Handles errors for files that are too large.\n *\n * @param {object} fileSizeErrorHandler - A custom function to be ran after the default error handling\n * @param {HTMLElement} fileInput - An input form field with type of file\n * @param {number} fileSizeMb - The size of the file in MB\n * @param {?number} maxFileSizeMb - The max file size limit in MB\n */\n\n\nfunction handleFileSizeError(fileSizeErrorHandler, fileInput, fileSizeMb, maxFileSizeMb) {\n  var fileInputField = fileInput;\n  fileInputField.value = null;\n\n  if (fileSizeErrorHandler) {\n    fileSizeErrorHandler();\n  } else {\n    var errorMessage = \"File size too large (\".concat(fileSizeMb, \" MB).\"); // If a user uploads a file type that we haven't defined a max size limit for then maxFileSizeMb\n    // could be NaN\n\n    if (maxFileSizeMb >= 0) {\n      errorMessage += \" The limit is \".concat(maxFileSizeMb, \" MB.\");\n    }\n\n    addErrorMessage(fileInput, errorMessage);\n  }\n}\n/**\n * Handles errors for files that are not a valid format.\n *\n * @param {object} fileSizeErrorHandler - A custom function to be ran after the default error handling\n * @param {HTMLElement} fileInput - An input form field with type of file\n * @param {string} fileType - The top level file type (i.e. image for image/png)\n * @param {string[]} permittedFileTypes - The top level file types (i.e. image for image/png) that are permitted\n */\n\n\nfunction handleFileTypeError(fileTypeErrorHandler, fileInput, fileType, permittedFileTypes) {\n  var fileInputField = fileInput;\n  fileInputField.value = null;\n\n  if (fileTypeErrorHandler) {\n    fileTypeErrorHandler();\n  } else {\n    var errorMessage = \"Invalid file format (\".concat(fileType, \"). Only \").concat(permittedFileTypes.join(', '), \" files are permitted.\");\n    addErrorMessage(fileInput, errorMessage);\n  }\n}\n/**\n * Handles errors for files with names that are too long.\n *\n * @param {object} fileNameLengthErrorHandler - A custom function to be ran after the default error handling\n * @param {HTMLElement} fileInput - An input form field with type of file\n * @param {number} maxFileNameLength - The max number of characters permitted for a file name\n */\n\n\nfunction handleFileNameLengthError(fileNameLengthErrorHandler, fileInput, maxFileNameLength) {\n  var fileInputField = fileInput;\n  fileInputField.value = null;\n\n  if (fileNameLengthErrorHandler) {\n    fileNameLengthErrorHandler();\n  } else {\n    var errorMessage = \"File name is too long. It can't be longer than \".concat(maxFileNameLength, \" characters.\");\n    addErrorMessage(fileInput, errorMessage);\n  }\n}\n/**\n * Validates the file size and handles the error if it's invalid.\n *\n * @external File\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/File File}\n *\n * @param {File} file - The file attached by the user\n * @param {string} fileType - The top level file type (i.e. image for image/png)\n * @param {HTMLElement} fileInput - An input form field with type of file\n *\n * @returns {Boolean} Returns false if the file is too big. Otherwise, returns true.\n */\n\n\nfunction validateFileSize(file, fileType, fileInput) {\n  var maxFileSizeMb = fileInput.dataset.maxFileSizeMb;\n  var fileSizeErrorHandler = fileInput.dataset.fileSizeErrorHandler;\n  var fileSizeMb = (file.size / (1024 * 1024)).toFixed(2);\n  maxFileSizeMb = Number(maxFileSizeMb || MAX_FILE_SIZE_MB[fileType]);\n  var isValidFileSize = fileSizeMb <= maxFileSizeMb;\n\n  if (!isValidFileSize) {\n    handleFileSizeError(fileSizeErrorHandler, fileInput, fileSizeMb, maxFileSizeMb);\n  }\n\n  return isValidFileSize;\n}\n/**\n * Validates the file type and handles the error if it's invalid.\n *\n * @external File\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/File File}\n *\n * @param {File} file - The file attached by the user\n * @param {string} fileType - The top level file type (i.e. image for image/png)\n * @param {HTMLElement} fileInput - An input form field with type of file\n *\n * @returns {Boolean} Returns false if the files is an invalid format. Otherwise, returns true.\n */\n\n\nfunction validateFileType(file, fileType, fileInput) {\n  var permittedFileTypes = fileInput.dataset.permittedFileTypes;\n\n  if (permittedFileTypes) {\n    permittedFileTypes = JSON.parse(permittedFileTypes);\n  }\n\n  permittedFileTypes = permittedFileTypes || PERMITTED_FILE_TYPES;\n  var fileTypeErrorHandler = fileInput.dataset.fileTypeErrorHandler;\n  var isValidFileType = permittedFileTypes.includes(fileType);\n\n  if (!isValidFileType) {\n    handleFileTypeError(fileTypeErrorHandler, fileInput, fileType, permittedFileTypes);\n  }\n\n  return isValidFileType;\n}\n/**\n * Validates the length of the file name and handles the error if it's invalid.\n *\n * @external File\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/File File}\n *\n * @param {File} file - The file attached by the user\n * @param {HTMLElement} fileInput - An input form field with type of file\n *\n * @returns {Boolean} Returns false if the file name is too long. Otherwise, returns true.\n */\n\n\nfunction validateFileNameLength(file, fileInput) {\n  var maxFileNameLength = fileInput.dataset.maxFileNameLength;\n  maxFileNameLength = Number(maxFileNameLength || MAX_FILE_NAME_LENGTH);\n  var fileNameLengthErrorHandler = fileInput.dataset.fileNameLengthErrorHandler;\n  var isValidFileNameLength = file.name.length <= maxFileNameLength;\n\n  if (!isValidFileNameLength) {\n    handleFileNameLengthError(fileNameLengthErrorHandler, fileInput, maxFileNameLength);\n  }\n\n  return isValidFileNameLength;\n}\n/**\n * This is the core function to handle validations of uploaded files. It loops\n * through all the uploaded files for the given fileInput and checks the file\n * size, file format, and file name length. If a file fails a validation, the\n * error is handled.\n *\n * @param {HTMLElement} fileInput - An input form field with type of file\n *\n * @returns {Boolean} Returns false if any files failed validations. Otherwise, returns true.\n */\n\n\nfunction validateFileInput(fileInput) {\n  var isValidFileInput = true;\n  removeErrorMessage(fileInput);\n  var files = Array.from(fileInput.files);\n\n  for (var i = 0; i < files.length; i += 1) {\n    var file = files[i];\n    var fileType = file.type.split('/')[0];\n    var isValidFileSize = validateFileSize(file, fileType, fileInput);\n\n    if (!isValidFileSize) {\n      isValidFileInput = false;\n      break;\n    }\n\n    var isValidFileType = validateFileType(file, fileType, fileInput);\n\n    if (!isValidFileType) {\n      isValidFileInput = false;\n      break;\n    }\n\n    var isValidFileNameLength = validateFileNameLength(file, fileInput);\n\n    if (!isValidFileNameLength) {\n      isValidFileInput = false;\n      break;\n    }\n  }\n\n  return isValidFileInput;\n}\n/**\n * This function is designed to be exported in areas where we are doing more\n * custom implementations of file uploading using Preact. It can then be used\n * in Preact event handlers. It loops through all file input fields on the DOM\n * and validates any attached files.\n *\n * @returns {Boolean} Returns false if any files failed validations. Otherwise, returns true.\n */\n\n\nfunction validateFileInputs() {\n  var validFileInputs = true;\n  var fileInputs = document.querySelectorAll('input[type=\"file\"]');\n\n  for (var i = 0; i < fileInputs.length; i += 1) {\n    var fileInput = fileInputs[i];\n    var validFileInput = validateFileInput(fileInput);\n\n    if (!validFileInput) {\n      validFileInputs = false;\n      break;\n    }\n  }\n\n  return validFileInputs;\n} // This is written so that it works automagically by just including this pack\n// in a view.\n\nvar fileInputs = document.querySelectorAll('input[type=\"file\"]');\nfileInputs.forEach(function (fileInput) {\n  fileInput.addEventListener('change', function () {\n    validateFileInput(fileInput);\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9wYWNrcy92YWxpZGF0ZUZpbGVJbnB1dHMuanM/ZTdlZSJdLCJuYW1lcyI6WyJNQVhfRklMRV9TSVpFX01CIiwiT2JqZWN0IiwiZnJlZXplIiwiaW1hZ2UiLCJ2aWRlbyIsIlBFUk1JVFRFRF9GSUxFX1RZUEVTIiwiTUFYX0ZJTEVfTkFNRV9MRU5HVEgiLCJyZW1vdmVFcnJvck1lc3NhZ2UiLCJmaWxlSW5wdXQiLCJlcnJvck1lc3NhZ2UiLCJwYXJlbnROb2RlIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsImFkZEVycm9yTWVzc2FnZSIsIm1zZyIsImZpbGVJbnB1dEZpZWxkIiwiZXJyb3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImNvbG9yIiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kIiwiaGFuZGxlRmlsZVNpemVFcnJvciIsImZpbGVTaXplRXJyb3JIYW5kbGVyIiwiZmlsZVNpemVNYiIsIm1heEZpbGVTaXplTWIiLCJ2YWx1ZSIsImhhbmRsZUZpbGVUeXBlRXJyb3IiLCJmaWxlVHlwZUVycm9ySGFuZGxlciIsImZpbGVUeXBlIiwicGVybWl0dGVkRmlsZVR5cGVzIiwiam9pbiIsImhhbmRsZUZpbGVOYW1lTGVuZ3RoRXJyb3IiLCJmaWxlTmFtZUxlbmd0aEVycm9ySGFuZGxlciIsIm1heEZpbGVOYW1lTGVuZ3RoIiwidmFsaWRhdGVGaWxlU2l6ZSIsImZpbGUiLCJkYXRhc2V0Iiwic2l6ZSIsInRvRml4ZWQiLCJOdW1iZXIiLCJpc1ZhbGlkRmlsZVNpemUiLCJ2YWxpZGF0ZUZpbGVUeXBlIiwiSlNPTiIsInBhcnNlIiwiaXNWYWxpZEZpbGVUeXBlIiwiaW5jbHVkZXMiLCJ2YWxpZGF0ZUZpbGVOYW1lTGVuZ3RoIiwiaXNWYWxpZEZpbGVOYW1lTGVuZ3RoIiwibmFtZSIsImxlbmd0aCIsInZhbGlkYXRlRmlsZUlucHV0IiwiaXNWYWxpZEZpbGVJbnB1dCIsImZpbGVzIiwiQXJyYXkiLCJmcm9tIiwiaSIsInR5cGUiLCJzcGxpdCIsInZhbGlkYXRlRmlsZUlucHV0cyIsInZhbGlkRmlsZUlucHV0cyIsImZpbGVJbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidmFsaWRGaWxlSW5wdXQiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBTUEsZ0JBQWdCLEdBQUdDLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjO0FBQ3JDQyxPQUFLLEVBQUUsRUFEOEI7QUFFckNDLE9BQUssRUFBRTtBQUY4QixDQUFkLENBQXpCO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQSxJQUFNQyxvQkFBb0IsR0FBRyxDQUFDLE9BQUQsQ0FBN0I7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsSUFBTUMsb0JBQW9CLEdBQUcsR0FBN0I7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsU0FBU0Msa0JBQVQsQ0FBNEJDLFNBQTVCLEVBQXVDO0FBQ3JDLE1BQU1DLFlBQVksR0FBR0QsU0FBUyxDQUFDRSxVQUFWLENBQXFCQyxhQUFyQixDQUNuQix1QkFEbUIsQ0FBckI7O0FBSUEsTUFBSUYsWUFBSixFQUFrQjtBQUNoQkEsZ0JBQVksQ0FBQ0csTUFBYjtBQUNEO0FBQ0Y7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQSxTQUFTQyxlQUFULENBQXlCTCxTQUF6QixFQUFvQ00sR0FBcEMsRUFBeUM7QUFDdkMsTUFBTUMsY0FBYyxHQUFHUCxTQUF2QjtBQUNBLE1BQU1RLEtBQUssR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLEtBQXZCLENBQWQ7QUFDQUYsT0FBSyxDQUFDRyxLQUFOLENBQVlDLEtBQVos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LEVBQU8vQixTQUFQLENBQXBEOztBQUVBLFFBQUksQ0FBQzJDLHFCQUFMLEVBQTRCO0FBQzFCSSxzQkFBZ0IsR0FBRyxLQUFuQjtBQUNBO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPQSxnQkFBUDtBQUNEO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ08sU0FBU08sa0JBQVQsR0FBOEI7QUFDbkMsTUFBSUMsZUFBZSxHQUFHLElBQXRCO0FBQ0EsTUFBTUMsVUFBVSxHQUFHL0MsUUFBUSxDQUFDZ0QsZ0JBQVQsQ0FBMEIsb0JBQTFCLENBQW5COztBQUVBLE9BQUssSUFBSU4sQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0ssVUFBVSxDQUFDWCxNQUEvQixFQUF1Q00sQ0FBQyxJQUFJLENBQTVDLEVBQStDO0FBQzdDLFFBQU1uRCxTQUFTLEdBQUd3RCxVQUFVLENBQUNMLENBQUQsQ0FBNUI7QUFDQSxRQUFNTyxjQUFjLEdBQUdaLGlCQUFpQixDQUFDOUMsU0FBRCxDQUF4Qzs7QUFFQSxRQUFJLENBQUMwRCxjQUFMLEVBQXFCO0FBQ25CSCxxQkFBZSxHQUFHLEtBQWxCO0FBQ0E7QUFDRDtBQUNGOztBQUVELFNBQU9BLGVBQVA7QUFDRCxDLENBRUQ7QUFDQTs7QUFDQSxJQUFNQyxVQUFVLEdBQUcvQyxRQUFRLENBQUNnRCxnQkFBVCxDQUEwQixvQkFBMUIsQ0FBbkI7QUFFQUQsVUFBVSxDQUFDRyxPQUFYLENBQW1CLFVBQUMzRCxTQUFELEVBQWU7QUFDaENBLFdBQVMsQ0FBQzRELGdCQUFWLENBQTJCLFFBQTNCLEVBQXFDLFlBQU07QUFDekNkLHFCQUFpQixDQUFDOUMsU0FBRCxDQUFqQjtBQUNELEdBRkQ7QUFHRCxDQUpEIiwiZmlsZSI6Ii4vYXBwL2phdmFzY3JpcHQvcGFja3MvdmFsaWRhdGVGaWxlSW5wdXRzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBNYW5hZ2VzIGxvZ2ljIHRvIHZhbGlkYXRlIGZpbGUgdXBsb2FkcyBjbGllbnQtc2lkZS4gSW4gZ2VuZXJhbCwgdGhlXG4gKiB2YWxpZGF0aW9ucyB3b3JrIGJ5IGxvb3Bpbmcgb3ZlciBpbnB1dCBmb3JtIGZpZWxkcyB3aXRoIGEgdHlwZSBvZiBmaWxlIGFuZFxuICogY2hlY2tpbmcgdGhlIHNpemUgYW5kIGZvcm1hdCBvZiB0aGUgZmlsZXMgdXBsb2FkIGJ5IHRoZSB1c2VyLlxuICovXG5cbi8qKlxuICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRvcCBsZXZlbCBNSU1FIHR5cGUgYXMgdGhlIGtleSBhbmQgdGhlIG1heCBmaWxlXG4gKiBzaXplIGluIE1CIGZvciB0aGUgdmFsdWUuIFRvIHVzZSBhIGRpZmZlcmVudCB2YWx1ZSB0aGFuIHRoZXNlIGRlZmF1bHRzLFxuICogc2ltcGx5IGFkZCBhIGRhdGEtbWF4LWZpbGUtbWIgYXR0cmlidXRlIHRvIHRoZSBpbnB1dCBmb3JtIGZpZWxkIHdpdGggdGhlXG4gKiBtYXggZmlsZSBzaXplIGluIE1CLiBJZiB0aGF0IGF0dHJpYnV0ZSBpcyBmb3VuZCwgaXQgdGFrZXMgcHJpb3JpdHkgb3ZlciB0aGVzZVxuICogZGVmYXVsdHMuXG4gKlxuICogQGNvbnN0YW50IHtPYmplY3QuPHN0cmluZywgbnVtYmVyPn1cbiAqL1xuY29uc3QgTUFYX0ZJTEVfU0laRV9NQiA9IE9iamVjdC5mcmVlemUoe1xuICBpbWFnZTogMjUsXG4gIHZpZGVvOiA1MCxcbn0pO1xuXG4vKipcbiAqIFBlcm1pdHRlZCBmaWxlIHR5cGVzIHVzaW5nIHRoZSB0b3AgbGV2ZWwgTUlNRSB0eXBlIChpLmUuIGltYWdlIGZvclxuICogaW1hZ2UvcG5nKS4gVG8gc3BlY2lmeSBwZXJtaXR0ZWQgZmlsZSB0eXBlcywgc2ltcGx5IGFkZCBhXG4gKiBkYXRhLXBlcm1pdHRlZC1maWxlLXR5cGVzIGF0dHJpYnV0ZSB0byB0aGUgaW5wdXQgZm9ybSBmaWVsZCBhcyBhbiBBcnJheSBvZlxuICogc3RyaW5ncyBzcGVjaWZ5aW5nIHRoZSB0b3AgbGV2ZWwgTUlNRSB0eXBlcyB0aGF0IGFyZSBwZXJtaXR0ZWQuXG4gKlxuICogQGNvbnN0YW50IHtzdHJpbmdbXX1cbiAqL1xuY29uc3QgUEVSTUlUVEVEX0ZJTEVfVFlQRVMgPSBbJ2ltYWdlJ107XG5cbi8qKlxuICogVGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBmaWxlIG5hbWUgdG8gcHJldmVudCBlcnJvcnMgb24gdGhlIGJhY2tlbmQgd2hlbiBhXG4gKiBmaWxlIG5hbWUgaXMgdG9vIGxvbmcuXG4gKlxuICogQGNvbnN0YW50IHtudW1iZXJ9XG4gKi9cbmNvbnN0IE1BWF9GSUxFX05BTUVfTEVOR1RIID0gMjUwO1xuXG4vKipcbiAqIFJlbW92ZXMgYW55IHByZS1leGlzdGluZyBlcnJvciBtZXNzYWdlcyBmcm9tIHRoZSBET00gcmVsYXRlZCB0byBmaWxlXG4gKiB2YWxpZGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGZpbGVJbnB1dCAtIEFuIGlucHV0IGZvcm0gZmllbGQgd2l0aCB0eXBlIG9mIGZpbGVcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlRXJyb3JNZXNzYWdlKGZpbGVJbnB1dCkge1xuICBjb25zdCBlcnJvck1lc3NhZ2UgPSBmaWxlSW5wdXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKFxuICAgICdkaXYuZmlsZS11cGxvYWQtZXJyb3InLFxuICApO1xuXG4gIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICBlcnJvck1lc3NhZ2UucmVtb3ZlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGVycm9yIG1lc3NhZ2VzIGluIHRoZSBmb3JtIG9mIGEgZGl2IHdpdGggcmVkIHRleHQuXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZmlsZUlucHV0IC0gQW4gaW5wdXQgZm9ybSBmaWVsZCB3aXRoIHR5cGUgb2YgZmlsZVxuICogQHBhcmFtIHtzdHJpbmd9IG1zZyAtIFRoZSBlcnJvciBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZCB0byB0aGUgdXNlclxuICpcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gVGhlIGVycm9yIGVsZW1lbnQgdGhhdCB3YXMgYWRkZWQgdG8gdGhlIERPTVxuICovXG5mdW5jdGlvbiBhZGRFcnJvck1lc3NhZ2UoZmlsZUlucHV0LCBtc2cpIHtcbiAgY29uc3QgZmlsZUlucHV0RmllbGQgPSBmaWxlSW5wdXQ7XG4gIGNvbnN0IGVycm9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVycm9yLnN0eWxlLmNvbG9yID0gJ3JlZCc7XG4gIGVycm9yLmlubmVySFRNTCA9IG1zZztcbiAgZXJyb3IuY2xhc3NMaXN0LmFkZCgnZmlsZS11cGxvYWQtZXJyb3InKTtcblxuICBmaWxlSW5wdXRGaWVsZC5wYXJlbnROb2RlLmFwcGVuZChlcnJvcik7XG59XG5cbi8qKlxuICogSGFuZGxlcyBlcnJvcnMgZm9yIGZpbGVzIHRoYXQgYXJlIHRvbyBsYXJnZS5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZmlsZVNpemVFcnJvckhhbmRsZXIgLSBBIGN1c3RvbSBmdW5jdGlvbiB0byBiZSByYW4gYWZ0ZXIgdGhlIGRlZmF1bHQgZXJyb3IgaGFuZGxpbmdcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGZpbGVJbnB1dCAtIEFuIGlucHV0IGZvcm0gZmllbGQgd2l0aCB0eXBlIG9mIGZpbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBmaWxlU2l6ZU1iIC0gVGhlIHNpemUgb2YgdGhlIGZpbGUgaW4gTUJcbiAqIEBwYXJhbSB7P251bWJlcn0gbWF4RmlsZVNpemVNYiAtIFRoZSBtYXggZmlsZSBzaXplIGxpbWl0IGluIE1CXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUZpbGVTaXplRXJyb3IoXG4gIGZpbGVTaXplRXJyb3JIYW5kbGVyLFxuICBmaWxlSW5wdXQsXG4gIGZpbGVTaXplTWIsXG4gIG1heEZpbGVTaXplTWIsXG4pIHtcbiAgY29uc3QgZmlsZUlucHV0RmllbGQgPSBmaWxlSW5wdXQ7XG4gIGZpbGVJbnB1dEZpZWxkLnZhbHVlID0gbnVsbDtcblxuICBpZiAoZmlsZVNpemVFcnJvckhhbmRsZXIpIHtcbiAgICBmaWxlU2l6ZUVycm9ySGFuZGxlcigpO1xuICB9IGVsc2Uge1xuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBgRmlsZSBzaXplIHRvbyBsYXJnZSAoJHtmaWxlU2l6ZU1ifSBNQikuYDtcblxuICAgIC8vIElmIGEgdXNlciB1cGxvYWRzIGEgZmlsZSB0eXBlIHRoYXQgd2UgaGF2ZW4ndCBkZWZpbmVkIGEgbWF4IHNpemUgbGltaXQgZm9yIHRoZW4gbWF4RmlsZVNpemVNYlxuICAgIC8vIGNvdWxkIGJlIE5hTlxuICAgIGlmIChtYXhGaWxlU2l6ZU1iID49IDApIHtcbiAgICAgIGVycm9yTWVzc2FnZSArPSBgIFRoZSBsaW1pdCBpcyAke21heEZpbGVTaXplTWJ9IE1CLmA7XG4gICAgfVxuXG4gICAgYWRkRXJyb3JNZXNzYWdlKGZpbGVJbnB1dCwgZXJyb3JNZXNzYWdlKTtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXMgZXJyb3JzIGZvciBmaWxlcyB0aGF0IGFyZSBub3QgYSB2YWxpZCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGZpbGVTaXplRXJyb3JIYW5kbGVyIC0gQSBjdXN0b20gZnVuY3Rpb24gdG8gYmUgcmFuIGFmdGVyIHRoZSBkZWZhdWx0IGVycm9yIGhhbmRsaW5nXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBmaWxlSW5wdXQgLSBBbiBpbnB1dCBmb3JtIGZpZWxkIHdpdGggdHlwZSBvZiBmaWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVR5cGUgLSBUaGUgdG9wIGxldmVsIGZpbGUgdHlwZSAoaS5lLiBpbWFnZSBmb3IgaW1hZ2UvcG5nKVxuICogQHBhcmFtIHtzdHJpbmdbXX0gcGVybWl0dGVkRmlsZVR5cGVzIC0gVGhlIHRvcCBsZXZlbCBmaWxlIHR5cGVzIChpLmUuIGltYWdlIGZvciBpbWFnZS9wbmcpIHRoYXQgYXJlIHBlcm1pdHRlZFxuICovXG5mdW5jdGlvbiBoYW5kbGVGaWxlVHlwZUVycm9yKFxuICBmaWxlVHlwZUVycm9ySGFuZGxlcixcbiAgZmlsZUlucHV0LFxuICBmaWxlVHlwZSxcbiAgcGVybWl0dGVkRmlsZVR5cGVzLFxuKSB7XG4gIGNvbnN0IGZpbGVJbnB1dEZpZWxkID0gZmlsZUlucHV0O1xuICBmaWxlSW5wdXRGaWVsZC52YWx1ZSA9IG51bGw7XG5cbiAgaWYgKGZpbGVUeXBlRXJyb3JIYW5kbGVyKSB7XG4gICAgZmlsZVR5cGVFcnJvckhhbmRsZXIoKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBgSW52YWxpZCBmaWxlIGZvcm1hdCAoJHtmaWxlVHlwZX0pLiBPbmx5ICR7cGVybWl0dGVkRmlsZVR5cGVzLmpvaW4oXG4gICAgICAnLCAnLFxuICAgICl9IGZpbGVzIGFyZSBwZXJtaXR0ZWQuYDtcbiAgICBhZGRFcnJvck1lc3NhZ2UoZmlsZUlucHV0LCBlcnJvck1lc3NhZ2UpO1xuICB9XG59XG5cbi8qKlxuICogSGFuZGxlcyBlcnJvcnMgZm9yIGZpbGVzIHdpdGggbmFtZXMgdGhhdCBhcmUgdG9vIGxvbmcuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGZpbGVOYW1lTGVuZ3RoRXJyb3JIYW5kbGVyIC0gQSBjdXN0b20gZnVuY3Rpb24gdG8gYmUgcmFuIGFmdGVyIHRoZSBkZWZhdWx0IGVycm9yIGhhbmRsaW5nXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBmaWxlSW5wdXQgLSBBbiBpbnB1dCBmb3JtIGZpZWxkIHdpdGggdHlwZSBvZiBmaWxlXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RmlsZU5hbWVMZW5ndGggLSBUaGUgbWF4IG51bWJlciBvZiBjaGFyYWN0ZXJzIHBlcm1pdHRlZCBmb3IgYSBmaWxlIG5hbWVcbiAqL1xuZnVuY3Rpb24gaGFuZGxlRmlsZU5hbWVMZW5ndGhFcnJvcihcbiAgZmlsZU5hbWVMZW5ndGhFcnJvckhhbmRsZXIsXG4gIGZpbGVJbnB1dCxcbiAgbWF4RmlsZU5hbWVMZW5ndGgsXG4pIHtcbiAgY29uc3QgZmlsZUlucHV0RmllbGQgPSBmaWxlSW5wdXQ7XG4gIGZpbGVJbnB1dEZpZWxkLnZhbHVlID0gbnVsbDtcblxuICBpZiAoZmlsZU5hbWVMZW5ndGhFcnJvckhhbmRsZXIpIHtcbiAgICBmaWxlTmFtZUxlbmd0aEVycm9ySGFuZGxlcigpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGBGaWxlIG5hbWUgaXMgdG9vIGxvbmcuIEl0IGNhbid0IGJlIGxvbmdlciB0aGFuICR7bWF4RmlsZU5hbWVMZW5ndGh9IGNoYXJhY3RlcnMuYDtcbiAgICBhZGRFcnJvck1lc3NhZ2UoZmlsZUlucHV0LCBlcnJvck1lc3NhZ2UpO1xuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoZSBmaWxlIHNpemUgYW5kIGhhbmRsZXMgdGhlIGVycm9yIGlmIGl0J3MgaW52YWxpZC5cbiAqXG4gKiBAZXh0ZXJuYWwgRmlsZVxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZpbGUgRmlsZX1cbiAqXG4gKiBAcGFyYW0ge0ZpbGV9IGZpbGUgLSBUaGUgZmlsZSBhdHRhY2hlZCBieSB0aGUgdXNlclxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVUeXBlIC0gVGhlIHRvcCBsZXZlbCBmaWxlIHR5cGUgKGkuZS4gaW1hZ2UgZm9yIGltYWdlL3BuZylcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGZpbGVJbnB1dCAtIEFuIGlucHV0IGZvcm0gZmllbGQgd2l0aCB0eXBlIG9mIGZpbGVcbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gUmV0dXJucyBmYWxzZSBpZiB0aGUgZmlsZSBpcyB0b28gYmlnLiBPdGhlcndpc2UsIHJldHVybnMgdHJ1ZS5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVGaWxlU2l6ZShmaWxlLCBmaWxlVHlwZSwgZmlsZUlucHV0KSB7XG4gIGxldCB7IG1heEZpbGVTaXplTWIgfSA9IGZpbGVJbnB1dC5kYXRhc2V0O1xuXG4gIGNvbnN0IHsgZmlsZVNpemVFcnJvckhhbmRsZXIgfSA9IGZpbGVJbnB1dC5kYXRhc2V0O1xuXG4gIGNvbnN0IGZpbGVTaXplTWIgPSAoZmlsZS5zaXplIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKTtcbiAgbWF4RmlsZVNpemVNYiA9IE51bWJlcihtYXhGaWxlU2l6ZU1iIHx8IE1BWF9GSUxFX1NJWkVfTUJbZmlsZVR5cGVdKTtcblxuICBjb25zdCBpc1ZhbGlkRmlsZVNpemUgPSBmaWxlU2l6ZU1iIDw9IG1heEZpbGVTaXplTWI7XG5cbiAgaWYgKCFpc1ZhbGlkRmlsZVNpemUpIHtcbiAgICBoYW5kbGVGaWxlU2l6ZUVycm9yKFxuICAgICAgZmlsZVNpemVFcnJvckhhbmRsZXIsXG4gICAgICBmaWxlSW5wdXQsXG4gICAgICBmaWxlU2l6ZU1iLFxuICAgICAgbWF4RmlsZVNpemVNYixcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGlzVmFsaWRGaWxlU2l6ZTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhlIGZpbGUgdHlwZSBhbmQgaGFuZGxlcyB0aGUgZXJyb3IgaWYgaXQncyBpbnZhbGlkLlxuICpcbiAqIEBleHRlcm5hbCBGaWxlXG4gKiBAc2VlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmlsZSBGaWxlfVxuICpcbiAqIEBwYXJhbSB7RmlsZX0gZmlsZSAtIFRoZSBmaWxlIGF0dGFjaGVkIGJ5IHRoZSB1c2VyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVR5cGUgLSBUaGUgdG9wIGxldmVsIGZpbGUgdHlwZSAoaS5lLiBpbWFnZSBmb3IgaW1hZ2UvcG5nKVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZmlsZUlucHV0IC0gQW4gaW5wdXQgZm9ybSBmaWVsZCB3aXRoIHR5cGUgb2YgZmlsZVxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSBSZXR1cm5zIGZhbHNlIGlmIHRoZSBmaWxlcyBpcyBhbiBpbnZhbGlkIGZvcm1hdC4gT3RoZXJ3aXNlLCByZXR1cm5zIHRydWUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRmlsZVR5cGUoZmlsZSwgZmlsZVR5cGUsIGZpbGVJbnB1dCkge1xuICBsZXQgeyBwZXJtaXR0ZWRGaWxlVHlwZXMgfSA9IGZpbGVJbnB1dC5kYXRhc2V0O1xuXG4gIGlmIChwZXJtaXR0ZWRGaWxlVHlwZXMpIHtcbiAgICBwZXJtaXR0ZWRGaWxlVHlwZXMgPSBKU09OLnBhcnNlKHBlcm1pdHRlZEZpbGVUeXBlcyk7XG4gIH1cblxuICBwZXJtaXR0ZWRGaWxlVHlwZXMgPSBwZXJtaXR0ZWRGaWxlVHlwZXMgfHwgUEVSTUlUVEVEX0ZJTEVfVFlQRVM7XG5cbiAgY29uc3QgeyBmaWxlVHlwZUVycm9ySGFuZGxlciB9ID0gZmlsZUlucHV0LmRhdGFzZXQ7XG5cbiAgY29uc3QgaXNWYWxpZEZpbGVUeXBlID0gcGVybWl0dGVkRmlsZVR5cGVzLmluY2x1ZGVzKGZpbGVUeXBlKTtcblxuICBpZiAoIWlzVmFsaWRGaWxlVHlwZSkge1xuICAgIGhhbmRsZUZpbGVUeXBlRXJyb3IoXG4gICAgICBmaWxlVHlwZUVycm9ySGFuZGxlcixcbiAgICAgIGZpbGVJbnB1dCxcbiAgICAgIGZpbGVUeXBlLFxuICAgICAgcGVybWl0dGVkRmlsZVR5cGVzLFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gaXNWYWxpZEZpbGVUeXBlO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGUgbGVuZ3RoIG9mIHRoZSBmaWxlIG5hbWUgYW5kIGhhbmRsZXMgdGhlIGVycm9yIGlmIGl0J3MgaW52YWxpZC5cbiAqXG4gKiBAZXh0ZXJuYWwgRmlsZVxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZpbGUgRmlsZX1cbiAqXG4gKiBAcGFyYW0ge0ZpbGV9IGZpbGUgLSBUaGUgZmlsZSBhdHRhY2hlZCBieSB0aGUgdXNlclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZmlsZUlucHV0IC0gQW4gaW5wdXQgZm9ybSBmaWVsZCB3aXRoIHR5cGUgb2YgZmlsZVxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSBSZXR1cm5zIGZhbHNlIGlmIHRoZSBmaWxlIG5hbWUgaXMgdG9vIGxvbmcuIE90aGVyd2lzZSwgcmV0dXJucyB0cnVlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUZpbGVOYW1lTGVuZ3RoKGZpbGUsIGZpbGVJbnB1dCkge1xuICBsZXQgeyBtYXhGaWxlTmFtZUxlbmd0aCB9ID0gZmlsZUlucHV0LmRhdGFzZXQ7XG5cbiAgbWF4RmlsZU5hbWVMZW5ndGggPSBOdW1iZXIobWF4RmlsZU5hbWVMZW5ndGggfHwgTUFYX0ZJTEVfTkFNRV9MRU5HVEgpO1xuXG4gIGNvbnN0IHsgZmlsZU5hbWVMZW5ndGhFcnJvckhhbmRsZXIgfSA9IGZpbGVJbnB1dC5kYXRhc2V0O1xuXG4gIGNvbnN0IGlzVmFsaWRGaWxlTmFtZUxlbmd0aCA9IGZpbGUubmFtZS5sZW5ndGggPD0gbWF4RmlsZU5hbWVMZW5ndGg7XG5cbiAgaWYgKCFpc1ZhbGlkRmlsZU5hbWVMZW5ndGgpIHtcbiAgICBoYW5kbGVGaWxlTmFtZUxlbmd0aEVycm9yKFxuICAgICAgZmlsZU5hbWVMZW5ndGhFcnJvckhhbmRsZXIsXG4gICAgICBmaWxlSW5wdXQsXG4gICAgICBtYXhGaWxlTmFtZUxlbmd0aCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGlzVmFsaWRGaWxlTmFtZUxlbmd0aDtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb3JlIGZ1bmN0aW9uIHRvIGhhbmRsZSB2YWxpZGF0aW9ucyBvZiB1cGxvYWRlZCBmaWxlcy4gSXQgbG9vcHNcbiAqIHRocm91Z2ggYWxsIHRoZSB1cGxvYWRlZCBmaWxlcyBmb3IgdGhlIGdpdmVuIGZpbGVJbnB1dCBhbmQgY2hlY2tzIHRoZSBmaWxlXG4gKiBzaXplLCBmaWxlIGZvcm1hdCwgYW5kIGZpbGUgbmFtZSBsZW5ndGguIElmIGEgZmlsZSBmYWlscyBhIHZhbGlkYXRpb24sIHRoZVxuICogZXJyb3IgaXMgaGFuZGxlZC5cbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBmaWxlSW5wdXQgLSBBbiBpbnB1dCBmb3JtIGZpZWxkIHdpdGggdHlwZSBvZiBmaWxlXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IFJldHVybnMgZmFsc2UgaWYgYW55IGZpbGVzIGZhaWxlZCB2YWxpZGF0aW9ucy4gT3RoZXJ3aXNlLCByZXR1cm5zIHRydWUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRmlsZUlucHV0KGZpbGVJbnB1dCkge1xuICBsZXQgaXNWYWxpZEZpbGVJbnB1dCA9IHRydWU7XG5cbiAgcmVtb3ZlRXJyb3JNZXNzYWdlKGZpbGVJbnB1dCk7XG4gIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShmaWxlSW5wdXQuZmlsZXMpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBmaWxlID0gZmlsZXNbaV07XG4gICAgY29uc3QgZmlsZVR5cGUgPSBmaWxlLnR5cGUuc3BsaXQoJy8nKVswXTtcblxuICAgIGNvbnN0IGlzVmFsaWRGaWxlU2l6ZSA9IHZhbGlkYXRlRmlsZVNpemUoZmlsZSwgZmlsZVR5cGUsIGZpbGVJbnB1dCk7XG5cbiAgICBpZiAoIWlzVmFsaWRGaWxlU2l6ZSkge1xuICAgICAgaXNWYWxpZEZpbGVJbnB1dCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY29uc3QgaXNWYWxpZEZpbGVUeXBlID0gdmFsaWRhdGVGaWxlVHlwZShmaWxlLCBmaWxlVHlwZSwgZmlsZUlucHV0KTtcblxuICAgIGlmICghaXNWYWxpZEZpbGVUeXBlKSB7XG4gICAgICBpc1ZhbGlkRmlsZUlucHV0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCBpc1ZhbGlkRmlsZU5hbWVMZW5ndGggPSB2YWxpZGF0ZUZpbGVOYW1lTGVuZ3RoKGZpbGUsIGZpbGVJbnB1dCk7XG5cbiAgICBpZiAoIWlzVmFsaWRGaWxlTmFtZUxlbmd0aCkge1xuICAgICAgaXNWYWxpZEZpbGVJbnB1dCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGlzVmFsaWRGaWxlSW5wdXQ7XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBleHBvcnRlZCBpbiBhcmVhcyB3aGVyZSB3ZSBhcmUgZG9pbmcgbW9yZVxuICogY3VzdG9tIGltcGxlbWVudGF0aW9ucyBvZiBmaWxlIHVwbG9hZGluZyB1c2luZyBQcmVhY3QuIEl0IGNhbiB0aGVuIGJlIHVzZWRcbiAqIGluIFByZWFjdCBldmVudCBoYW5kbGVycy4gSXQgbG9vcHMgdGhyb3VnaCBhbGwgZmlsZSBpbnB1dCBmaWVsZHMgb24gdGhlIERPTVxuICogYW5kIHZhbGlkYXRlcyBhbnkgYXR0YWNoZWQgZmlsZXMuXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IFJldHVybnMgZmFsc2UgaWYgYW55IGZpbGVzIGZhaWxlZCB2YWxpZGF0aW9ucy4gT3RoZXJ3aXNlLCByZXR1cm5zIHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZpbGVJbnB1dHMoKSB7XG4gIGxldCB2YWxpZEZpbGVJbnB1dHMgPSB0cnVlO1xuICBjb25zdCBmaWxlSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImZpbGVcIl0nKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVJbnB1dHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBmaWxlSW5wdXQgPSBmaWxlSW5wdXRzW2ldO1xuICAgIGNvbnN0IHZhbGlkRmlsZUlucHV0ID0gdmFsaWRhdGVGaWxlSW5wdXQoZmlsZUlucHV0KTtcblxuICAgIGlmICghdmFsaWRGaWxlSW5wdXQpIHtcbiAgICAgIHZhbGlkRmlsZUlucHV0cyA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbGlkRmlsZUlucHV0cztcbn1cblxuLy8gVGhpcyBpcyB3cml0dGVuIHNvIHRoYXQgaXQgd29ya3MgYXV0b21hZ2ljYWxseSBieSBqdXN0IGluY2x1ZGluZyB0aGlzIHBhY2tcbi8vIGluIGEgdmlldy5cbmNvbnN0IGZpbGVJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpO1xuXG5maWxlSW5wdXRzLmZvckVhY2goKGZpbGVJbnB1dCkgPT4ge1xuICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgIHZhbGlkYXRlRmlsZUlucHV0KGZpbGVJbnB1dCk7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./app/javascript/packs/validateFileInputs.js\n");

/***/ })

},[["./app/javascript/packs/validateFileInputs.js","runtime~validateFileInputs"]]]);